!function(e,n){e.wp=e.wp||{},e.wp.mediaelement=new function(){var e={};return{initialize:function(){(e="undefined"!=typeof _wpmejsSettings?n.extend(!0,{},_wpmejsSettings):e).classPrefix="mejs-",e.success=e.success||function(e){var n,t;e.rendererName&&-1!==e.rendererName.indexOf("flash")&&(n=e.attributes.autoplay&&"false"!==e.attributes.autoplay,t=e.attributes.loop&&"false"!==e.attributes.loop,n&&e.addEventListener("canplay",function(){e.play()},!1),t&&e.addEventListener("ended",function(){e.play()},!1))},e.customError=function(e,n){if(-1!==e.rendererName.indexOf("flash")||-1!==e.rendererName.indexOf("flv"))return'<a href="'+n.src+'">'+mejsL10n.strings["mejs.download-video"]+"</a>"},n(".wp-audio-shortcode, .wp-video-shortcode").not(".mejs-container").filter(function(){return!n(this).parent().hasClass("mejs-mediaelement")}).mediaelementplayer(e)}}},n(e.wp.mediaelement.initialize)}(window,jQuery);
;//     Underscore.js 1.8.3
//     http://underscorejs.org
//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.
(function(){function n(n){function t(t,r,e,u,i,o){for(;i>=0&&o>i;i+=n){var a=u?u[i]:i;e=r(e,t[a],a,t)}return e}return function(r,e,u,i){e=b(e,i,4);var o=!k(r)&&m.keys(r),a=(o||r).length,c=n>0?0:a-1;return arguments.length<3&&(u=r[o?o[c]:c],c+=n),t(r,e,u,o,c,a)}}function t(n){return function(t,r,e){r=x(r,e);for(var u=O(t),i=n>0?0:u-1;i>=0&&u>i;i+=n)if(r(t[i],i,t))return i;return-1}}function r(n,t,r){return function(e,u,i){var o=0,a=O(e);if("number"==typeof i)n>0?o=i>=0?i:Math.max(i+a,o):a=i>=0?Math.min(i+1,a):i+a+1;else if(r&&i&&a)return i=r(e,u),e[i]===u?i:-1;if(u!==u)return i=t(l.call(e,o,a),m.isNaN),i>=0?i+o:-1;for(i=n>0?o:a-1;i>=0&&a>i;i+=n)if(e[i]===u)return i;return-1}}function e(n,t){var r=I.length,e=n.constructor,u=m.isFunction(e)&&e.prototype||a,i="constructor";for(m.has(n,i)&&!m.contains(t,i)&&t.push(i);r--;)i=I[r],i in n&&n[i]!==u[i]&&!m.contains(t,i)&&t.push(i)}var u=this,i=u._,o=Array.prototype,a=Object.prototype,c=Function.prototype,f=o.push,l=o.slice,s=a.toString,p=a.hasOwnProperty,h=Array.isArray,v=Object.keys,g=c.bind,y=Object.create,d=function(){},m=function(n){return n instanceof m?n:this instanceof m?void(this._wrapped=n):new m(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=m),exports._=m):u._=m,m.VERSION="1.8.3";var b=function(n,t,r){if(t===void 0)return n;switch(null==r?3:r){case 1:return function(r){return n.call(t,r)};case 2:return function(r,e){return n.call(t,r,e)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)}}return function(){return n.apply(t,arguments)}},x=function(n,t,r){return null==n?m.identity:m.isFunction(n)?b(n,t,r):m.isObject(n)?m.matcher(n):m.property(n)};m.iteratee=function(n,t){return x(n,t,1/0)};var _=function(n,t){return function(r){var e=arguments.length;if(2>e||null==r)return r;for(var u=1;e>u;u++)for(var i=arguments[u],o=n(i),a=o.length,c=0;a>c;c++){var f=o[c];t&&r[f]!==void 0||(r[f]=i[f])}return r}},j=function(n){if(!m.isObject(n))return{};if(y)return y(n);d.prototype=n;var t=new d;return d.prototype=null,t},w=function(n){return function(t){return null==t?void 0:t[n]}},A=Math.pow(2,53)-1,O=w("length"),k=function(n){var t=O(n);return"number"==typeof t&&t>=0&&A>=t};m.each=m.forEach=function(n,t,r){t=b(t,r);var e,u;if(k(n))for(e=0,u=n.length;u>e;e++)t(n[e],e,n);else{var i=m.keys(n);for(e=0,u=i.length;u>e;e++)t(n[i[e]],i[e],n)}return n},m.map=m.collect=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=Array(u),o=0;u>o;o++){var a=e?e[o]:o;i[o]=t(n[a],a,n)}return i},m.reduce=m.foldl=m.inject=n(1),m.reduceRight=m.foldr=n(-1),m.find=m.detect=function(n,t,r){var e;return e=k(n)?m.findIndex(n,t,r):m.findKey(n,t,r),e!==void 0&&e!==-1?n[e]:void 0},m.filter=m.select=function(n,t,r){var e=[];return t=x(t,r),m.each(n,function(n,r,u){t(n,r,u)&&e.push(n)}),e},m.reject=function(n,t,r){return m.filter(n,m.negate(x(t)),r)},m.every=m.all=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(!t(n[o],o,n))return!1}return!0},m.some=m.any=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(t(n[o],o,n))return!0}return!1},m.contains=m.includes=m.include=function(n,t,r,e){return k(n)||(n=m.values(n)),("number"!=typeof r||e)&&(r=0),m.indexOf(n,t,r)>=0},m.invoke=function(n,t){var r=l.call(arguments,2),e=m.isFunction(t);return m.map(n,function(n){var u=e?t:n[t];return null==u?u:u.apply(n,r)})},m.pluck=function(n,t){return m.map(n,m.property(t))},m.where=function(n,t){return m.filter(n,m.matcher(t))},m.findWhere=function(n,t){return m.find(n,m.matcher(t))},m.max=function(n,t,r){var e,u,i=-1/0,o=-1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],e>i&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(u>o||u===-1/0&&i===-1/0)&&(i=n,o=u)});return i},m.min=function(n,t,r){var e,u,i=1/0,o=1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],i>e&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(o>u||1/0===u&&1/0===i)&&(i=n,o=u)});return i},m.shuffle=function(n){for(var t,r=k(n)?n:m.values(n),e=r.length,u=Array(e),i=0;e>i;i++)t=m.random(0,i),t!==i&&(u[i]=u[t]),u[t]=r[i];return u},m.sample=function(n,t,r){return null==t||r?(k(n)||(n=m.values(n)),n[m.random(n.length-1)]):m.shuffle(n).slice(0,Math.max(0,t))},m.sortBy=function(n,t,r){return t=x(t,r),m.pluck(m.map(n,function(n,r,e){return{value:n,index:r,criteria:t(n,r,e)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||r===void 0)return 1;if(e>r||e===void 0)return-1}return n.index-t.index}),"value")};var F=function(n){return function(t,r,e){var u={};return r=x(r,e),m.each(t,function(e,i){var o=r(e,i,t);n(u,e,o)}),u}};m.groupBy=F(function(n,t,r){m.has(n,r)?n[r].push(t):n[r]=[t]}),m.indexBy=F(function(n,t,r){n[r]=t}),m.countBy=F(function(n,t,r){m.has(n,r)?n[r]++:n[r]=1}),m.toArray=function(n){return n?m.isArray(n)?l.call(n):k(n)?m.map(n,m.identity):m.values(n):[]},m.size=function(n){return null==n?0:k(n)?n.length:m.keys(n).length},m.partition=function(n,t,r){t=x(t,r);var e=[],u=[];return m.each(n,function(n,r,i){(t(n,r,i)?e:u).push(n)}),[e,u]},m.first=m.head=m.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:m.initial(n,n.length-t)},m.initial=function(n,t,r){return l.call(n,0,Math.max(0,n.length-(null==t||r?1:t)))},m.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:m.rest(n,Math.max(0,n.length-t))},m.rest=m.tail=m.drop=function(n,t,r){return l.call(n,null==t||r?1:t)},m.compact=function(n){return m.filter(n,m.identity)};var S=function(n,t,r,e){for(var u=[],i=0,o=e||0,a=O(n);a>o;o++){var c=n[o];if(k(c)&&(m.isArray(c)||m.isArguments(c))){t||(c=S(c,t,r));var f=0,l=c.length;for(u.length+=l;l>f;)u[i++]=c[f++]}else r||(u[i++]=c)}return u};m.flatten=function(n,t){return S(n,t,!1)},m.without=function(n){return m.difference(n,l.call(arguments,1))},m.uniq=m.unique=function(n,t,r,e){m.isBoolean(t)||(e=r,r=t,t=!1),null!=r&&(r=x(r,e));for(var u=[],i=[],o=0,a=O(n);a>o;o++){var c=n[o],f=r?r(c,o,n):c;t?(o&&i===f||u.push(c),i=f):r?m.contains(i,f)||(i.push(f),u.push(c)):m.contains(u,c)||u.push(c)}return u},m.union=function(){return m.uniq(S(arguments,!0,!0))},m.intersection=function(n){for(var t=[],r=arguments.length,e=0,u=O(n);u>e;e++){var i=n[e];if(!m.contains(t,i)){for(var o=1;r>o&&m.contains(arguments[o],i);o++);o===r&&t.push(i)}}return t},m.difference=function(n){var t=S(arguments,!0,!0,1);return m.filter(n,function(n){return!m.contains(t,n)})},m.zip=function(){return m.unzip(arguments)},m.unzip=function(n){for(var t=n&&m.max(n,O).length||0,r=Array(t),e=0;t>e;e++)r[e]=m.pluck(n,e);return r},m.object=function(n,t){for(var r={},e=0,u=O(n);u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},m.findIndex=t(1),m.findLastIndex=t(-1),m.sortedIndex=function(n,t,r,e){r=x(r,e,1);for(var u=r(t),i=0,o=O(n);o>i;){var a=Math.floor((i+o)/2);r(n[a])<u?i=a+1:o=a}return i},m.indexOf=r(1,m.findIndex,m.sortedIndex),m.lastIndexOf=r(-1,m.findLastIndex),m.range=function(n,t,r){null==t&&(t=n||0,n=0),r=r||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=Array(e),i=0;e>i;i++,n+=r)u[i]=n;return u};var E=function(n,t,r,e,u){if(!(e instanceof t))return n.apply(r,u);var i=j(n.prototype),o=n.apply(i,u);return m.isObject(o)?o:i};m.bind=function(n,t){if(g&&n.bind===g)return g.apply(n,l.call(arguments,1));if(!m.isFunction(n))throw new TypeError("Bind must be called on a function");var r=l.call(arguments,2),e=function(){return E(n,e,t,this,r.concat(l.call(arguments)))};return e},m.partial=function(n){var t=l.call(arguments,1),r=function(){for(var e=0,u=t.length,i=Array(u),o=0;u>o;o++)i[o]=t[o]===m?arguments[e++]:t[o];for(;e<arguments.length;)i.push(arguments[e++]);return E(n,r,this,this,i)};return r},m.bindAll=function(n){var t,r,e=arguments.length;if(1>=e)throw new Error("bindAll must be passed function names");for(t=1;e>t;t++)r=arguments[t],n[r]=m.bind(n[r],n);return n},m.memoize=function(n,t){var r=function(e){var u=r.cache,i=""+(t?t.apply(this,arguments):e);return m.has(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return r.cache={},r},m.delay=function(n,t){var r=l.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},m.defer=m.partial(m.delay,m,1),m.throttle=function(n,t,r){var e,u,i,o=null,a=0;r||(r={});var c=function(){a=r.leading===!1?0:m.now(),o=null,i=n.apply(e,u),o||(e=u=null)};return function(){var f=m.now();a||r.leading!==!1||(a=f);var l=t-(f-a);return e=this,u=arguments,0>=l||l>t?(o&&(clearTimeout(o),o=null),a=f,i=n.apply(e,u),o||(e=u=null)):o||r.trailing===!1||(o=setTimeout(c,l)),i}},m.debounce=function(n,t,r){var e,u,i,o,a,c=function(){var f=m.now()-o;t>f&&f>=0?e=setTimeout(c,t-f):(e=null,r||(a=n.apply(i,u),e||(i=u=null)))};return function(){i=this,u=arguments,o=m.now();var f=r&&!e;return e||(e=setTimeout(c,t)),f&&(a=n.apply(i,u),i=u=null),a}},m.wrap=function(n,t){return m.partial(t,n)},m.negate=function(n){return function(){return!n.apply(this,arguments)}},m.compose=function(){var n=arguments,t=n.length-1;return function(){for(var r=t,e=n[t].apply(this,arguments);r--;)e=n[r].call(this,e);return e}},m.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},m.before=function(n,t){var r;return function(){return--n>0&&(r=t.apply(this,arguments)),1>=n&&(t=null),r}},m.once=m.partial(m.before,2);var M=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];m.keys=function(n){if(!m.isObject(n))return[];if(v)return v(n);var t=[];for(var r in n)m.has(n,r)&&t.push(r);return M&&e(n,t),t},m.allKeys=function(n){if(!m.isObject(n))return[];var t=[];for(var r in n)t.push(r);return M&&e(n,t),t},m.values=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},m.mapObject=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=u.length,o={},a=0;i>a;a++)e=u[a],o[e]=t(n[e],e,n);return o},m.pairs=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},m.invert=function(n){for(var t={},r=m.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},m.functions=m.methods=function(n){var t=[];for(var r in n)m.isFunction(n[r])&&t.push(r);return t.sort()},m.extend=_(m.allKeys),m.extendOwn=m.assign=_(m.keys),m.findKey=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=0,o=u.length;o>i;i++)if(e=u[i],t(n[e],e,n))return e},m.pick=function(n,t,r){var e,u,i={},o=n;if(null==o)return i;m.isFunction(t)?(u=m.allKeys(o),e=b(t,r)):(u=S(arguments,!1,!1,1),e=function(n,t,r){return t in r},o=Object(o));for(var a=0,c=u.length;c>a;a++){var f=u[a],l=o[f];e(l,f,o)&&(i[f]=l)}return i},m.omit=function(n,t,r){if(m.isFunction(t))t=m.negate(t);else{var e=m.map(S(arguments,!1,!1,1),String);t=function(n,t){return!m.contains(e,t)}}return m.pick(n,t,r)},m.defaults=_(m.allKeys,!0),m.create=function(n,t){var r=j(n);return t&&m.extendOwn(r,t),r},m.clone=function(n){return m.isObject(n)?m.isArray(n)?n.slice():m.extend({},n):n},m.tap=function(n,t){return t(n),n},m.isMatch=function(n,t){var r=m.keys(t),e=r.length;if(null==n)return!e;for(var u=Object(n),i=0;e>i;i++){var o=r[i];if(t[o]!==u[o]||!(o in u))return!1}return!0};var N=function(n,t,r,e){if(n===t)return 0!==n||1/n===1/t;if(null==n||null==t)return n===t;n instanceof m&&(n=n._wrapped),t instanceof m&&(t=t._wrapped);var u=s.call(n);if(u!==s.call(t))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":return+n!==+n?+t!==+t:0===+n?1/+n===1/t:+n===+t;case"[object Date]":case"[object Boolean]":return+n===+t}var i="[object Array]"===u;if(!i){if("object"!=typeof n||"object"!=typeof t)return!1;var o=n.constructor,a=t.constructor;if(o!==a&&!(m.isFunction(o)&&o instanceof o&&m.isFunction(a)&&a instanceof a)&&"constructor"in n&&"constructor"in t)return!1}r=r||[],e=e||[];for(var c=r.length;c--;)if(r[c]===n)return e[c]===t;if(r.push(n),e.push(t),i){if(c=n.length,c!==t.length)return!1;for(;c--;)if(!N(n[c],t[c],r,e))return!1}else{var f,l=m.keys(n);if(c=l.length,m.keys(t).length!==c)return!1;for(;c--;)if(f=l[c],!m.has(t,f)||!N(n[f],t[f],r,e))return!1}return r.pop(),e.pop(),!0};m.isEqual=function(n,t){return N(n,t)},m.isEmpty=function(n){return null==n?!0:k(n)&&(m.isArray(n)||m.isString(n)||m.isArguments(n))?0===n.length:0===m.keys(n).length},m.isElement=function(n){return!(!n||1!==n.nodeType)},m.isArray=h||function(n){return"[object Array]"===s.call(n)},m.isObject=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},m.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(n){m["is"+n]=function(t){return s.call(t)==="[object "+n+"]"}}),m.isArguments(arguments)||(m.isArguments=function(n){return m.has(n,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(m.isFunction=function(n){return"function"==typeof n||!1}),m.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},m.isNaN=function(n){return m.isNumber(n)&&n!==+n},m.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===s.call(n)},m.isNull=function(n){return null===n},m.isUndefined=function(n){return n===void 0},m.has=function(n,t){return null!=n&&p.call(n,t)},m.noConflict=function(){return u._=i,this},m.identity=function(n){return n},m.constant=function(n){return function(){return n}},m.noop=function(){},m.property=w,m.propertyOf=function(n){return null==n?function(){}:function(t){return n[t]}},m.matcher=m.matches=function(n){return n=m.extendOwn({},n),function(t){return m.isMatch(t,n)}},m.times=function(n,t,r){var e=Array(Math.max(0,n));t=b(t,r,1);for(var u=0;n>u;u++)e[u]=t(u);return e},m.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},m.now=Date.now||function(){return(new Date).getTime()};var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},T=m.invert(B),R=function(n){var t=function(t){return n[t]},r="(?:"+m.keys(n).join("|")+")",e=RegExp(r),u=RegExp(r,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,t):n}};m.escape=R(B),m.unescape=R(T),m.result=function(n,t,r){var e=null==n?void 0:n[t];return e===void 0&&(e=r),m.isFunction(e)?e.call(n):e};var q=0;m.uniqueId=function(n){var t=++q+"";return n?n+t:t},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var K=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\u2028|\u2029/g,L=function(n){return"\\"+z[n]};m.template=function(n,t,r){!t&&r&&(t=r),t=m.defaults({},t,m.templateSettings);var e=RegExp([(t.escape||K).source,(t.interpolate||K).source,(t.evaluate||K).source].join("|")+"|$","g"),u=0,i="__p+='";n.replace(e,function(t,r,e,o,a){return i+=n.slice(u,a).replace(D,L),u=a+t.length,r?i+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":e?i+="'+\n((__t=("+e+"))==null?'':__t)+\n'":o&&(i+="';\n"+o+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var o=new Function(t.variable||"obj","_",i)}catch(a){throw a.source=i,a}var c=function(n){return o.call(this,n,m)},f=t.variable||"obj";return c.source="function("+f+"){\n"+i+"}",c},m.chain=function(n){var t=m(n);return t._chain=!0,t};var P=function(n,t){return n._chain?m(t).chain():t};m.mixin=function(n){m.each(m.functions(n),function(t){var r=m[t]=n[t];m.prototype[t]=function(){var n=[this._wrapped];return f.apply(n,arguments),P(this,r.apply(m,n))}})},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=o[n];m.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==n&&"splice"!==n||0!==r.length||delete r[0],P(this,r)}}),m.each(["concat","join","slice"],function(n){var t=o[n];m.prototype[n]=function(){return P(this,t.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return m})}).call(this);

;window.wp=window.wp||{},function(i){var e="undefined"==typeof _wpUtilSettings?{}:_wpUtilSettings;wp.template=_.memoize(function(t){var n,s={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(e){return(n=n||_.template(i("#tmpl-"+t).html(),s))(e)}}),wp.ajax={settings:e.ajax||{},post:function(e,t){return wp.ajax.send({data:_.isObject(e)?e:_.extend(t||{},{action:e})})},send:function(e,n){var t;return _.isObject(e)?n=e:(n=n||{}).data=_.extend(n.data||{},{action:e}),n=_.defaults(n||{},{type:"POST",url:wp.ajax.settings.url,context:this}),(e=(t=i.Deferred(function(t){n.success&&t.done(n.success),n.error&&t.fail(n.error),delete n.success,delete n.error,t.jqXHR=i.ajax(n).done(function(e){"1"!==e&&1!==e||(e={success:!0}),_.isObject(e)&&!_.isUndefined(e.success)?t[e.success?"resolveWith":"rejectWith"](this,[e.data]):t.rejectWith(this,[e])}).fail(function(){t.rejectWith(this,arguments)})})).promise()).abort=function(){return t.jqXHR.abort(),this},e}}}(jQuery);
;(function(t){var e=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global;if(typeof define==="function"&&define.amd){define(["underscore","jquery","exports"],function(i,r,n){e.Backbone=t(e,n,i,r)})}else if(typeof exports!=="undefined"){var i=require("underscore"),r;try{r=require("jquery")}catch(n){}t(e,exports,i,r)}else{e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}})(function(t,e,i,r){var n=t.Backbone;var s=Array.prototype.slice;e.VERSION="1.3.3";e.$=r;e.noConflict=function(){t.Backbone=n;return this};e.emulateHTTP=false;e.emulateJSON=false;var a=function(t,e,r){switch(t){case 1:return function(){return i[e](this[r])};case 2:return function(t){return i[e](this[r],t)};case 3:return function(t,n){return i[e](this[r],o(t,this),n)};case 4:return function(t,n,s){return i[e](this[r],o(t,this),n,s)};default:return function(){var t=s.call(arguments);t.unshift(this[r]);return i[e].apply(i,t)}}};var h=function(t,e,r){i.each(e,function(e,n){if(i[n])t.prototype[n]=a(e,n,r)})};var o=function(t,e){if(i.isFunction(t))return t;if(i.isObject(t)&&!e._isModel(t))return l(t);if(i.isString(t))return function(e){return e.get(t)};return t};var l=function(t){var e=i.matches(t);return function(t){return e(t.attributes)}};var u=e.Events={};var c=/\s+/;var f=function(t,e,r,n,s){var a=0,h;if(r&&typeof r==="object"){if(n!==void 0&&"context"in s&&s.context===void 0)s.context=n;for(h=i.keys(r);a<h.length;a++){e=f(t,e,h[a],r[h[a]],s)}}else if(r&&c.test(r)){for(h=r.split(c);a<h.length;a++){e=t(e,h[a],n,s)}}else{e=t(e,r,n,s)}return e};u.on=function(t,e,i){return d(this,t,e,i)};var d=function(t,e,i,r,n){t._events=f(v,t._events||{},e,i,{context:r,ctx:t,listening:n});if(n){var s=t._listeners||(t._listeners={});s[n.id]=n}return t};u.listenTo=function(t,e,r){if(!t)return this;var n=t._listenId||(t._listenId=i.uniqueId("l"));var s=this._listeningTo||(this._listeningTo={});var a=s[n];if(!a){var h=this._listenId||(this._listenId=i.uniqueId("l"));a=s[n]={obj:t,objId:n,id:h,listeningTo:s,count:0}}d(t,e,r,this,a);return this};var v=function(t,e,i,r){if(i){var n=t[e]||(t[e]=[]);var s=r.context,a=r.ctx,h=r.listening;if(h)h.count++;n.push({callback:i,context:s,ctx:s||a,listening:h})}return t};u.off=function(t,e,i){if(!this._events)return this;this._events=f(g,this._events,t,e,{context:i,listeners:this._listeners});return this};u.stopListening=function(t,e,r){var n=this._listeningTo;if(!n)return this;var s=t?[t._listenId]:i.keys(n);for(var a=0;a<s.length;a++){var h=n[s[a]];if(!h)break;h.obj.off(e,r,this)}return this};var g=function(t,e,r,n){if(!t)return;var s=0,a;var h=n.context,o=n.listeners;if(!e&&!r&&!h){var l=i.keys(o);for(;s<l.length;s++){a=o[l[s]];delete o[a.id];delete a.listeningTo[a.objId]}return}var u=e?[e]:i.keys(t);for(;s<u.length;s++){e=u[s];var c=t[e];if(!c)break;var f=[];for(var d=0;d<c.length;d++){var v=c[d];if(r&&r!==v.callback&&r!==v.callback._callback||h&&h!==v.context){f.push(v)}else{a=v.listening;if(a&&--a.count===0){delete o[a.id];delete a.listeningTo[a.objId]}}}if(f.length){t[e]=f}else{delete t[e]}}return t};u.once=function(t,e,r){var n=f(p,{},t,e,i.bind(this.off,this));if(typeof t==="string"&&r==null)e=void 0;return this.on(n,e,r)};u.listenToOnce=function(t,e,r){var n=f(p,{},e,r,i.bind(this.stopListening,this,t));return this.listenTo(t,n)};var p=function(t,e,r,n){if(r){var s=t[e]=i.once(function(){n(e,s);r.apply(this,arguments)});s._callback=r}return t};u.trigger=function(t){if(!this._events)return this;var e=Math.max(0,arguments.length-1);var i=Array(e);for(var r=0;r<e;r++)i[r]=arguments[r+1];f(m,this._events,t,void 0,i);return this};var m=function(t,e,i,r){if(t){var n=t[e];var s=t.all;if(n&&s)s=s.slice();if(n)_(n,r);if(s)_(s,[e].concat(r))}return t};var _=function(t,e){var i,r=-1,n=t.length,s=e[0],a=e[1],h=e[2];switch(e.length){case 0:while(++r<n)(i=t[r]).callback.call(i.ctx);return;case 1:while(++r<n)(i=t[r]).callback.call(i.ctx,s);return;case 2:while(++r<n)(i=t[r]).callback.call(i.ctx,s,a);return;case 3:while(++r<n)(i=t[r]).callback.call(i.ctx,s,a,h);return;default:while(++r<n)(i=t[r]).callback.apply(i.ctx,e);return}};u.bind=u.on;u.unbind=u.off;i.extend(e,u);var y=e.Model=function(t,e){var r=t||{};e||(e={});this.cid=i.uniqueId(this.cidPrefix);this.attributes={};if(e.collection)this.collection=e.collection;if(e.parse)r=this.parse(r,e)||{};var n=i.result(this,"defaults");r=i.defaults(i.extend({},n,r),n);this.set(r,e);this.changed={};this.initialize.apply(this,arguments)};i.extend(y.prototype,u,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return this.get(t)!=null},matches:function(t){return!!i.iteratee(t,this)(this.attributes)},set:function(t,e,r){if(t==null)return this;var n;if(typeof t==="object"){n=t;r=e}else{(n={})[t]=e}r||(r={});if(!this._validate(n,r))return false;var s=r.unset;var a=r.silent;var h=[];var o=this._changing;this._changing=true;if(!o){this._previousAttributes=i.clone(this.attributes);this.changed={}}var l=this.attributes;var u=this.changed;var c=this._previousAttributes;for(var f in n){e=n[f];if(!i.isEqual(l[f],e))h.push(f);if(!i.isEqual(c[f],e)){u[f]=e}else{delete u[f]}s?delete l[f]:l[f]=e}if(this.idAttribute in n)this.id=this.get(this.idAttribute);if(!a){if(h.length)this._pending=r;for(var d=0;d<h.length;d++){this.trigger("change:"+h[d],this,l[h[d]],r)}}if(o)return this;if(!a){while(this._pending){r=this._pending;this._pending=false;this.trigger("change",this,r)}}this._pending=false;this._changing=false;return this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:true}))},clear:function(t){var e={};for(var r in this.attributes)e[r]=void 0;return this.set(e,i.extend({},t,{unset:true}))},hasChanged:function(t){if(t==null)return!i.isEmpty(this.changed);return i.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?i.clone(this.changed):false;var e=this._changing?this._previousAttributes:this.attributes;var r={};for(var n in t){var s=t[n];if(i.isEqual(e[n],s))continue;r[n]=s}return i.size(r)?r:false},previous:function(t){if(t==null||!this._previousAttributes)return null;return this._previousAttributes[t]},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=i.extend({parse:true},t);var e=this;var r=t.success;t.success=function(i){var n=t.parse?e.parse(i,t):i;if(!e.set(n,t))return false;if(r)r.call(t.context,e,i,t);e.trigger("sync",e,i,t)};B(this,t);return this.sync("read",this,t)},save:function(t,e,r){var n;if(t==null||typeof t==="object"){n=t;r=e}else{(n={})[t]=e}r=i.extend({validate:true,parse:true},r);var s=r.wait;if(n&&!s){if(!this.set(n,r))return false}else if(!this._validate(n,r)){return false}var a=this;var h=r.success;var o=this.attributes;r.success=function(t){a.attributes=o;var e=r.parse?a.parse(t,r):t;if(s)e=i.extend({},n,e);if(e&&!a.set(e,r))return false;if(h)h.call(r.context,a,t,r);a.trigger("sync",a,t,r)};B(this,r);if(n&&s)this.attributes=i.extend({},o,n);var l=this.isNew()?"create":r.patch?"patch":"update";if(l==="patch"&&!r.attrs)r.attrs=n;var u=this.sync(l,this,r);this.attributes=o;return u},destroy:function(t){t=t?i.clone(t):{};var e=this;var r=t.success;var n=t.wait;var s=function(){e.stopListening();e.trigger("destroy",e,e.collection,t)};t.success=function(i){if(n)s();if(r)r.call(t.context,e,i,t);if(!e.isNew())e.trigger("sync",e,i,t)};var a=false;if(this.isNew()){i.defer(t.success)}else{B(this,t);a=this.sync("delete",this,t)}if(!n)s();return a},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||F();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend({},t,{validate:true}))},_validate:function(t,e){if(!e.validate||!this.validate)return true;t=i.extend({},this.attributes,t);var r=this.validationError=this.validate(t,e)||null;if(!r)return true;this.trigger("invalid",this,r,i.extend(e,{validationError:r}));return false}});var b={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};h(y,b,"attributes");var x=e.Collection=function(t,e){e||(e={});if(e.model)this.model=e.model;if(e.comparator!==void 0)this.comparator=e.comparator;this._reset();this.initialize.apply(this,arguments);if(t)this.reset(t,i.extend({silent:true},e))};var w={add:true,remove:true,merge:true};var E={add:true,remove:false};var I=function(t,e,i){i=Math.min(Math.max(i,0),t.length);var r=Array(t.length-i);var n=e.length;var s;for(s=0;s<r.length;s++)r[s]=t[s+i];for(s=0;s<n;s++)t[s+i]=e[s];for(s=0;s<r.length;s++)t[s+n+i]=r[s]};i.extend(x.prototype,u,{model:y,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:false},e,E))},remove:function(t,e){e=i.extend({},e);var r=!i.isArray(t);t=r?[t]:t.slice();var n=this._removeModels(t,e);if(!e.silent&&n.length){e.changes={added:[],merged:[],removed:n};this.trigger("update",this,e)}return r?n[0]:n},set:function(t,e){if(t==null)return;e=i.extend({},w,e);if(e.parse&&!this._isModel(t)){t=this.parse(t,e)||[]}var r=!i.isArray(t);t=r?[t]:t.slice();var n=e.at;if(n!=null)n=+n;if(n>this.length)n=this.length;if(n<0)n+=this.length+1;var s=[];var a=[];var h=[];var o=[];var l={};var u=e.add;var c=e.merge;var f=e.remove;var d=false;var v=this.comparator&&n==null&&e.sort!==false;var g=i.isString(this.comparator)?this.comparator:null;var p,m;for(m=0;m<t.length;m++){p=t[m];var _=this.get(p);if(_){if(c&&p!==_){var y=this._isModel(p)?p.attributes:p;if(e.parse)y=_.parse(y,e);_.set(y,e);h.push(_);if(v&&!d)d=_.hasChanged(g)}if(!l[_.cid]){l[_.cid]=true;s.push(_)}t[m]=_}else if(u){p=t[m]=this._prepareModel(p,e);if(p){a.push(p);this._addReference(p,e);l[p.cid]=true;s.push(p)}}}if(f){for(m=0;m<this.length;m++){p=this.models[m];if(!l[p.cid])o.push(p)}if(o.length)this._removeModels(o,e)}var b=false;var x=!v&&u&&f;if(s.length&&x){b=this.length!==s.length||i.some(this.models,function(t,e){return t!==s[e]});this.models.length=0;I(this.models,s,0);this.length=this.models.length}else if(a.length){if(v)d=true;I(this.models,a,n==null?this.length:n);this.length=this.models.length}if(d)this.sort({silent:true});if(!e.silent){for(m=0;m<a.length;m++){if(n!=null)e.index=n+m;p=a[m];p.trigger("add",p,this,e)}if(d||b)this.trigger("sort",this,e);if(a.length||o.length||h.length){e.changes={added:a,removed:o,merged:h};this.trigger("update",this,e)}}return r?t[0]:t},reset:function(t,e){e=e?i.clone(e):{};for(var r=0;r<this.models.length;r++){this._removeReference(this.models[r],e)}e.previousModels=this.models;this._reset();t=this.add(t,i.extend({silent:true},e));if(!e.silent)this.trigger("reset",this,e);return t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return s.apply(this.models,arguments)},get:function(t){if(t==null)return void 0;return this._byId[t]||this._byId[this.modelId(t.attributes||t)]||t.cid&&this._byId[t.cid]},has:function(t){return this.get(t)!=null},at:function(t){if(t<0)t+=this.length;return this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,true)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var r=e.length;if(i.isFunction(e))e=i.bind(e,this);if(r===1||i.isString(e)){this.models=this.sortBy(e)}else{this.models.sort(e)}if(!t.silent)this.trigger("sort",this,t);return this},pluck:function(t){return this.map(t+"")},fetch:function(t){t=i.extend({parse:true},t);var e=t.success;var r=this;t.success=function(i){var n=t.reset?"reset":"set";r[n](i,t);if(e)e.call(t.context,r,i,t);r.trigger("sync",r,i,t)};B(this,t);return this.sync("read",this,t)},create:function(t,e){e=e?i.clone(e):{};var r=e.wait;t=this._prepareModel(t,e);if(!t)return false;if(!r)this.add(t,e);var n=this;var s=e.success;e.success=function(t,e,i){if(r)n.add(t,i);if(s)s.call(i.context,t,e,i)};t.save(null,e);return t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(t,e){if(this._isModel(t)){if(!t.collection)t.collection=this;return t}e=e?i.clone(e):{};e.collection=this;var r=new this.model(t,e);if(!r.validationError)return r;this.trigger("invalid",this,r.validationError,e);return false},_removeModels:function(t,e){var i=[];for(var r=0;r<t.length;r++){var n=this.get(t[r]);if(!n)continue;var s=this.indexOf(n);this.models.splice(s,1);this.length--;delete this._byId[n.cid];var a=this.modelId(n.attributes);if(a!=null)delete this._byId[a];if(!e.silent){e.index=s;n.trigger("remove",n,this,e)}i.push(n);this._removeReference(n,e)}return i},_isModel:function(t){return t instanceof y},_addReference:function(t,e){this._byId[t.cid]=t;var i=this.modelId(t.attributes);if(i!=null)this._byId[i]=t;t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var i=this.modelId(t.attributes);if(i!=null)delete this._byId[i];if(this===t.collection)delete t.collection;t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,r){if(e){if((t==="add"||t==="remove")&&i!==this)return;if(t==="destroy")this.remove(e,r);if(t==="change"){var n=this.modelId(e.previousAttributes());var s=this.modelId(e.attributes);if(n!==s){if(n!=null)delete this._byId[n];if(s!=null)this._byId[s]=e}}}this.trigger.apply(this,arguments)}});var S={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3};h(x,S,"models");var k=e.View=function(t){this.cid=i.uniqueId("view");i.extend(this,i.pick(t,P));this._ensureElement();this.initialize.apply(this,arguments)};var T=/^(\S+)\s*(.*)$/;var P=["model","collection","el","id","attributes","className","tagName","events"];i.extend(k.prototype,u,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){this._removeElement();this.stopListening();return this},_removeElement:function(){this.$el.remove()},setElement:function(t){this.undelegateEvents();this._setElement(t);this.delegateEvents();return this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t);this.el=this.$el[0]},delegateEvents:function(t){t||(t=i.result(this,"events"));if(!t)return this;this.undelegateEvents();for(var e in t){var r=t[e];if(!i.isFunction(r))r=this[r];if(!r)continue;var n=e.match(T);this.delegate(n[1],n[2],i.bind(r,this))}return this},delegate:function(t,e,i){this.$el.on(t+".delegateEvents"+this.cid,e,i);return this},undelegateEvents:function(){if(this.$el)this.$el.off(".delegateEvents"+this.cid);return this},undelegate:function(t,e,i){this.$el.off(t+".delegateEvents"+this.cid,e,i);return this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(!this.el){var t=i.extend({},i.result(this,"attributes"));if(this.id)t.id=i.result(this,"id");if(this.className)t["class"]=i.result(this,"className");this.setElement(this._createElement(i.result(this,"tagName")));this._setAttributes(t)}else{this.setElement(i.result(this,"el"))}},_setAttributes:function(t){this.$el.attr(t)}});e.sync=function(t,r,n){var s=H[t];i.defaults(n||(n={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:s,dataType:"json"};if(!n.url){a.url=i.result(r,"url")||F()}if(n.data==null&&r&&(t==="create"||t==="update"||t==="patch")){a.contentType="application/json";a.data=JSON.stringify(n.attrs||r.toJSON(n))}if(n.emulateJSON){a.contentType="application/x-www-form-urlencoded";a.data=a.data?{model:a.data}:{}}if(n.emulateHTTP&&(s==="PUT"||s==="DELETE"||s==="PATCH")){a.type="POST";if(n.emulateJSON)a.data._method=s;var h=n.beforeSend;n.beforeSend=function(t){t.setRequestHeader("X-HTTP-Method-Override",s);if(h)return h.apply(this,arguments)}}if(a.type!=="GET"&&!n.emulateJSON){a.processData=false}var o=n.error;n.error=function(t,e,i){n.textStatus=e;n.errorThrown=i;if(o)o.call(n.context,t,e,i)};var l=n.xhr=e.ajax(i.extend(a,n));r.trigger("request",r,l,n);return l};var H={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var $=e.Router=function(t){t||(t={});if(t.routes)this.routes=t.routes;this._bindRoutes();this.initialize.apply(this,arguments)};var A=/\((.*?)\)/g;var C=/(\(\?)?:\w+/g;var R=/\*\w+/g;var j=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend($.prototype,u,{initialize:function(){},route:function(t,r,n){if(!i.isRegExp(t))t=this._routeToRegExp(t);if(i.isFunction(r)){n=r;r=""}if(!n)n=this[r];var s=this;e.history.route(t,function(i){var a=s._extractParameters(t,i);if(s.execute(n,a,r)!==false){s.trigger.apply(s,["route:"+r].concat(a));s.trigger("route",r,a);e.history.trigger("route",s,r,a)}});return this},execute:function(t,e,i){if(t)t.apply(this,e)},navigate:function(t,i){e.history.navigate(t,i);return this},_bindRoutes:function(){if(!this.routes)return;this.routes=i.result(this,"routes");var t,e=i.keys(this.routes);while((t=e.pop())!=null){this.route(t,this.routes[t])}},_routeToRegExp:function(t){t=t.replace(j,"\\$&").replace(A,"(?:$1)?").replace(C,function(t,e){return e?t:"([^/?]+)"}).replace(R,"([^?]*?)");return new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var r=t.exec(e).slice(1);return i.map(r,function(t,e){if(e===r.length-1)return t||null;return t?decodeURIComponent(t):null})}});var N=e.History=function(){this.handlers=[];this.checkUrl=i.bind(this.checkUrl,this);if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var M=/^[#\/]|\s+$/g;var O=/^\/+|\/+$/g;var U=/#.*$/;N.started=false;i.extend(N.prototype,u,{interval:50,atRoot:function(){var t=this.location.pathname.replace(/[^\/]$/,"$&/");return t===this.root&&!this.getSearch()},matchRoot:function(){var t=this.decodeFragment(this.location.pathname);var e=t.slice(0,this.root.length-1)+"/";return e===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return t.charAt(0)==="/"?t.slice(1):t},getFragment:function(t){if(t==null){if(this._usePushState||!this._wantsHashChange){t=this.getPath()}else{t=this.getHash()}}return t.replace(M,"")},start:function(t){if(N.started)throw new Error("Backbone.history has already been started");N.started=true;this.options=i.extend({root:"/"},this.options,t);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7);this._useHashChange=this._wantsHashChange&&this._hasHashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.history&&this.history.pushState);this._usePushState=this._wantsPushState&&this._hasPushState;this.fragment=this.getFragment();this.root=("/"+this.root+"/").replace(O,"/");if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";this.location.replace(e+"#"+this.getPath());return true}else if(this._hasPushState&&this.atRoot()){this.navigate(this.getHash(),{replace:true})}}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe");this.iframe.src="javascript:0";this.iframe.style.display="none";this.iframe.tabIndex=-1;var r=document.body;var n=r.insertBefore(this.iframe,r.firstChild).contentWindow;n.document.open();n.document.close();n.location.hash="#"+this.fragment}var s=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState){s("popstate",this.checkUrl,false)}else if(this._useHashChange&&!this.iframe){s("hashchange",this.checkUrl,false)}else if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}if(!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};if(this._usePushState){t("popstate",this.checkUrl,false)}else if(this._useHashChange&&!this.iframe){t("hashchange",this.checkUrl,false)}if(this.iframe){document.body.removeChild(this.iframe);this.iframe=null}if(this._checkUrlInterval)clearInterval(this._checkUrlInterval);N.started=false},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe){e=this.getHash(this.iframe.contentWindow)}if(e===this.fragment)return false;if(this.iframe)this.navigate(e);this.loadUrl()},loadUrl:function(t){if(!this.matchRoot())return false;t=this.fragment=this.getFragment(t);return i.some(this.handlers,function(e){if(e.route.test(t)){e.callback(t);return true}})},navigate:function(t,e){if(!N.started)return false;if(!e||e===true)e={trigger:!!e};t=this.getFragment(t||"");var i=this.root;if(t===""||t.charAt(0)==="?"){i=i.slice(0,-1)||"/"}var r=i+t;t=this.decodeFragment(t.replace(U,""));if(this.fragment===t)return;this.fragment=t;if(this._usePushState){this.history[e.replace?"replaceState":"pushState"]({},document.title,r)}else if(this._wantsHashChange){this._updateHash(this.location,t,e.replace);if(this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var n=this.iframe.contentWindow;if(!e.replace){n.document.open();n.document.close()}this._updateHash(n.location,t,e.replace)}}else{return this.location.assign(r)}if(e.trigger)return this.loadUrl(t)},_updateHash:function(t,e,i){if(i){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else{t.hash="#"+e}}});e.history=new N;var q=function(t,e){var r=this;var n;if(t&&i.has(t,"constructor")){n=t.constructor}else{n=function(){return r.apply(this,arguments)}}i.extend(n,r,e);n.prototype=i.create(r.prototype,t);n.prototype.constructor=n;n.__super__=r.prototype;return n};y.extend=x.extend=$.extend=k.extend=N.extend=q;var F=function(){throw new Error('A "url" property or function must be specified')};var B=function(t,e){var i=e.error;e.error=function(r){if(i)i.call(e.context,t,r,e);t.trigger("error",t,r,e)}};return e});

;!function(r,e,i){"use strict";window.wp=window.wp||{};var t=i.View.extend({initialize:function(t){this.index=0,this.settings={},this.data=t.metadata||r.parseJSON(this.$("script.wp-playlist-script").html()),this.playerNode=this.$(this.data.type),this.tracks=new i.Collection(this.data.tracks),this.current=this.tracks.first(),"audio"===this.data.type&&(this.currentTemplate=wp.template("wp-playlist-current-item"),this.currentNode=this.$(".wp-playlist-current-item")),this.renderCurrent(),this.data.tracklist&&(this.itemTemplate=wp.template("wp-playlist-item"),this.playingClass="wp-playlist-playing",this.renderTracks()),this.playerNode.attr("src",this.current.get("src")),e.bindAll(this,"bindPlayer","bindResetPlayer","setPlayer","ended","clickTrack"),e.isUndefined(window._wpmejsSettings)||(this.settings=e.clone(_wpmejsSettings)),this.settings.success=this.bindPlayer,this.setPlayer()},bindPlayer:function(t){this.mejs=t,this.mejs.addEventListener("ended",this.ended)},bindResetPlayer:function(t){this.bindPlayer(t),this.playCurrentSrc()},setPlayer:function(t){this.player&&(this.player.pause(),this.player.remove(),this.playerNode=this.$(this.data.type)),t&&(this.playerNode.attr("src",this.current.get("src")),this.settings.success=this.bindResetPlayer),this.player=new MediaElementPlayer(this.playerNode.get(0),this.settings)},playCurrentSrc:function(){this.renderCurrent(),this.mejs.setSrc(this.playerNode.attr("src")),this.mejs.load(),this.mejs.play()},renderCurrent:function(){var t;"video"===this.data.type?(this.data.images&&this.current.get("image")&&-1===this.current.get("image").src.indexOf("wp-includes/images/media/video.png")&&this.playerNode.attr("poster",this.current.get("image").src),t=this.current.get("dimensions").resized,this.playerNode.attr(t)):(this.data.images||this.current.set("image",!1),this.currentNode.html(this.currentTemplate(this.current.toJSON())))},renderTracks:function(){var e=this,i=1,s=r('<div class="wp-playlist-tracks"></div>');this.tracks.each(function(t){e.data.images||t.set("image",!1),t.set("artists",e.data.artists),t.set("index",!!e.data.tracknumbers&&i),s.append(e.itemTemplate(t.toJSON())),i+=1}),this.$el.append(s),this.$(".wp-playlist-item").eq(0).addClass(this.playingClass)},events:{"click .wp-playlist-item":"clickTrack","click .wp-playlist-next":"next","click .wp-playlist-prev":"prev"},clickTrack:function(t){t.preventDefault(),this.index=this.$(".wp-playlist-item").index(t.currentTarget),this.setCurrent()},ended:function(){this.index+1<this.tracks.length?this.next():(this.index=0,this.setCurrent())},next:function(){this.index=this.index+1>=this.tracks.length?0:this.index+1,this.setCurrent()},prev:function(){this.index=this.index-1<0?this.tracks.length-1:this.index-1,this.setCurrent()},loadCurrent:function(){var t=this.playerNode.attr("src")&&this.playerNode.attr("src").split(".").pop(),e=this.current.get("src").split(".").pop();this.mejs&&this.mejs.pause(),t!==e?this.setPlayer(!0):(this.playerNode.attr("src",this.current.get("src")),this.playCurrentSrc())},setCurrent:function(){this.current=this.tracks.at(this.index),this.data.tracklist&&this.$(".wp-playlist-item").removeClass(this.playingClass).eq(this.index).addClass(this.playingClass),this.loadCurrent()}});function s(){r(".wp-playlist:not(:has(.mejs-container))").each(function(){new t({el:this})})}window.wp.playlist={initialize:s},r(document).ready(s),window.WPPlaylistView=t}(jQuery,_,Backbone);
;var WPViews=WPViews||{};var wpv_stop_rollover={};window.wpvPaginationAjaxLoaded={};window.wpvPaginationAnimationFinished={};window.wpvPaginationQueue={};;(function(){jQuery.fn.wpv_clone=function(){var result=jQuery.fn.clone.apply(this,arguments),my_textareas=this.find('textarea').add(this.filter('textarea')),result_textareas=result.find('textarea').add(result.filter('textarea')),my_selects=this.find('select').add(this.filter('select')),result_selects=result.find('select').add(result.filter('select'));for(var i=0,l=my_textareas.length;i<l;++i){jQuery(result_textareas[i]).val(jQuery(my_textareas[i]).val());}
for(var i=0,l=my_selects.length;i<l;++i){for(var j=0,m=my_selects[i].options.length;j<m;++j){if(my_selects[i].options[j].selected===true){result_selects[i].options[j].selected=true;}else{result_selects[i].options[j].selected=false;}}}
return result;};})();WPViews.ViewFrontendUtils=function($){var self=this;self.datepicker_style_id='js-toolset-datepicker-style';self.is_datepicker_style_loaded=false;self.just_return=function(){return;};self.extract_url_query_parameters=function(query_string){var query_string_pairs={};if(query_string==""){return query_string_pairs;}
var query_string_split=query_string.split('&'),query_string_split_length=query_string_split.length;for(var i=0;i<query_string_split_length;++i){var qs_part=query_string_split[i].split('=');if(qs_part.length!=2){continue;};var thiz_key=qs_part[0],thiz_val=decodeURIComponent(qs_part[1].replace(/\+/g," "));thiz_key=thiz_key.replace(/(\[)\d?(\])/,"");thiz_key=thiz_key.replace("[]","");thiz_key=thiz_key.replace(/(%5B)\d?(%5D)/,"");thiz_key=thiz_key.replace("%5B%5D","");thiz_key=thiz_key.replace(/(%255B)\d?(%255D)/,"");thiz_key=thiz_key.replace("%255B%255D","");if(query_string_pairs.hasOwnProperty(thiz_key)){if(query_string_pairs[thiz_key]!=thiz_val){query_string_pairs[thiz_key]+='##URLARRAYVALHACK##'+thiz_val;}else{query_string_pairs[thiz_key]=thiz_val;}}else{query_string_pairs[thiz_key]=thiz_val;}}
return query_string_pairs;};self.get_extra_url_query_parameters_by_form=function(form){var query_string=self.extract_url_query_parameters(window.location.search.substr(1)),data={},force_from_form=!(form.hasClass('js-wpv-dps-enabled')||form.hasClass('js-wpv-ajax-results-enabled')||form.hasClass('js-wpv-ajax-results-submit-enabled'));for(var prop in query_string){if(query_string.hasOwnProperty(prop)&&!data.hasOwnProperty(prop)&&(force_from_form||form.find('[name="'+prop+'"], [name="'+prop+'\\[\\]"]').length===0)){data[prop]=query_string[prop];}}
return data;};self.set_extra_url_query_parameters_by_form=function(form){var extra=self.get_extra_url_query_parameters_by_form(form);$.each(extra,function(key,value){if(form.find('[name="'+key+'"], [name="'+key+'\\[\\]"]').length===0){var pieces=value.split('##URLARRAYVALHACK##'),pieces_length=pieces.length;if(pieces_length<2){$('<input>').attr({type:'hidden',name:key,value:value}).appendTo(form);}else{for(var iter=0;iter<pieces_length;iter++){$('<input>').attr({type:'hidden',name:key+"[]",value:pieces[iter]}).appendTo(form);}}}});};self.maybe_load_datepicker_style=function(){if(!self.is_datepicker_style_loaded){if(document.getElementById(self.datepicker_style_id)){self.is_datepicker_style_loaded=true;}else{var head=document.getElementsByTagName('head')[0],link=document.createElement('link');link.id=self.datepicker_style_id;link.rel='stylesheet';link.type='text/css';link.href=wpv_pagination_local.datepicker_style_url;link.media='all';head.appendChild(link);self.is_datepicker_style_loaded=true;}}};self.destroy_frontend_datepicker=function(){$(".js-wpv-frontend-datepicker.js-wpv-frontend-datepicker-inited").removeClass('js-wpv-frontend-datepicker-inited').datepicker("destroy");};self.render_frontend_datepicker=function(){$('.js-wpv-frontend-datepicker:not(.js-wpv-frontend-datepicker-inited)').each(function(){self.maybe_load_datepicker_style();var thiz=$(this);thiz.addClass('js-wpv-frontend-datepicker-inited').datepicker({onSelect:function(dateText,inst){var url_param=thiz.data('param'),data='date='+dateText,form=thiz.closest('form');data+='&date-format='+$('.js-wpv-date-param-'+url_param+'-format').val();data+='&action=wpv_format_date';$.post(wpv_pagination_local.front_ajaxurl,data,function(response){response=$.parseJSON(response);form.find('.js-wpv-date-param-'+url_param).html(response['display']);form.find('.js-wpv-date-front-end-clear-'+url_param).show();form.find('.js-wpv-date-param-'+url_param+'-value').val(response['timestamp']).trigger('change');});},dateFormat:'ddmmyy',minDate:wpv_pagination_local.datepicker_min_date,maxDate:wpv_pagination_local.datepicker_max_date,showOn:"button",buttonImage:wpv_pagination_local.calendar_image,buttonText:wpv_pagination_local.calendar_text,buttonImageOnly:true,changeMonth:true,changeYear:true});});};self.clone_form=function(fil,targets){var cloned=fil.wpv_clone();targets.each(function(){$(this).replaceWith(cloned);});};self.render_frontend_media_shortcodes=function(container){container.find('.wp-audio-shortcode, .wp-video-shortcode').each(function(){var thiz=$(this);thiz.mediaelementplayer();});container.find('.wp-playlist').each(function(){var thiz=$(this);return new WPPlaylistView({el:this});});};self.get_form_element_type=function(selector){if(selector.length>0){return selector[0].tagName=="INPUT"?selector[0].type.toLowerCase():selector[0].tagName.toLowerCase();}else{return'';}}
self.get_hidden_item_width=function(item){var item_clone=item.clone().css({'display':'block','visibility':'visible','position':'absolute','z-index':'-99999','left':'99999999px','top':'0px','white-space':'nowrap'}).appendTo('body'),width=item_clone.outerWidth();item_clone.remove();return width;};self.get_updated_query_results=function(view_number,page,form,expect){var data={},sort={},environment={},search={},extra={}.attributes={},lang=(typeof icl_lang=='undefined')?false:icl_lang,parametric_data=form.data('parametric');sort=WPViews.view_sorting.get_sort_data(view_number,form);if(parametric_data['environment'].current_post_id>0){environment['wpv_aux_current_post_id']=parametric_data['environment'].current_post_id;}
if(parametric_data['environment'].parent_post_id>0){environment['wpv_aux_parent_post_id']=parametric_data['environment'].parent_post_id;}
if(parametric_data['environment'].parent_term_id>0){environment['wpv_aux_parent_term_id']=parametric_data['environment'].parent_term_id;}
if(parametric_data['environment'].parent_user_id>0){environment['wpv_aux_parent_user_id']=parametric_data['environment'].parent_user_id;}
environment['archive']=parametric_data['environment'].archive;if(form.find('.js-wpv-post-relationship-update').length){search['dps_pr']=form.find('.js-wpv-post-relationship-update').serializeArray();}
if(form.hasClass('js-wpv-dps-enabled')||form.hasClass('js-wpv-ajax-results-enabled')||form.hasClass('js-wpv-ajax-results-submit-enabled')){search['dps_general']=form.find('.js-wpv-filter-trigger, .js-wpv-filter-trigger-delayed').serializeArray();}
attributes=parametric_data['attributes'];extra=self.get_extra_url_query_parameters_by_form(form);data={'view_number':view_number,page:page,sort:sort,attributes:attributes,environment:environment,search:search,extra:extra,expect:expect};if(lang){data['lang']=lang;}
switch(parametric_data.query){case'archive':data['action']='wpv_get_archive_query_results';data['loop']=parametric_data.loop;break;default:data['action']='wpv_get_view_query_results';data['id']=parametric_data.id;if(form.attr('data-targetid')){data['target_id']=form.data('targetid');}else if($('.js-wpv-form-only.js-wpv-filter-form-'+view_number).length>0){data['target_id']=$('.js-wpv-form-only.js-wpv-filter-form-'+view_number).data('targetid');}
data['wpv_view_widget_id']=parametric_data['widget_id'];break;}
return $.ajax({type:"POST",dataType:"json",url:wpv_pagination_local.front_ajaxurl,data:data});};self.updateUrlQuery=function(key,value,url){if(!url){url=window.location.href;}
var re=new RegExp("([?&])"+key+"=.*?(&|#|$)(.*)","gi");var hash;if(re.test(url)){if(typeof value!=='undefined'&&value!==null){return url.replace(re,'$1'+key+"="+value+'$2$3');}else{hash=url.split('#');url=hash[0].replace(re,'$1$3').replace(/(&|\?)$/,'');if(typeof hash[1]!=='undefined'&&hash[1]!==null){url+='#'+hash[1];}
return url;}}else{if(typeof value!=='undefined'&&value!==null){var separator=url.indexOf('?')!==-1?'&':'?';hash=url.split('#');url=hash[0]+separator+key+'='+value;if(typeof hash[1]!=='undefined'&&hash[1]!==null){url+='#'+hash[1];}
return url;}else{return url;}}};$(window).on('resize',_.debounce(function(){$('.js-wpv-layout-responsive').each(function(){$(this).css('width','');}).promise().done(function(){$(document).trigger('js_event_wpv_layout_responsive_resize_completed');});},wpv_pagination_local.resize_debounce_tolerance));self.init=function(){self.render_frontend_datepicker();};self.init();};WPViews.ViewSorting=function($){var self=this;self.get_sort_data=function(view_number,form){var sort={},parametric_data=form.data('parametric');sort['wpv_sort_orderby']=parametric_data['sort']['orderby'];sort['wpv_sort_order']=parametric_data['sort']['order'];sort['wpv_sort_orderby_as']=parametric_data['sort']['orderby_as'];sort['wpv_sort_orderby_second']=parametric_data['sort']['orderby_second'];sort['wpv_sort_order_second']=parametric_data['sort']['order_second'];if(form.find('.js-wpv-sort-control-orderby').length>0){var orderby_type=WPViews.view_frontend_utils.get_form_element_type(form.find('.js-wpv-sort-control-orderby'));switch(orderby_type){case'select':sort['wpv_sort_orderby']=form.find('.js-wpv-sort-control-orderby').val();if(form.find('.js-wpv-sort-control-orderby option:selected').data('orderbyas')){sort['wpv_sort_orderby_as']=form.find('.js-wpv-sort-control-orderby option:selected').data('orderbyas');}else if(sort['wpv_sort_orderby']!=parametric_data['sort']['orderby']){sort['wpv_sort_orderby_as']='';}
break;case'radio':sort['wpv_sort_orderby']=form.find('.js-wpv-sort-control-orderby:checked').val();if(form.find('.js-wpv-sort-control-orderby:checked').data('orderbyas')){sort['wpv_sort_orderby_as']=form.find('.js-wpv-sort-control-orderby:checked').data('orderbyas');}else if(sort['wpv_sort_orderby']!=parametric_data['sort']['orderby']){sort['wpv_sort_orderby_as']='';}
break;case'text':case'hidden':sort['wpv_sort_orderby']=form.find('.js-wpv-sort-control-orderby').val();if(form.find('.js-wpv-sort-control-orderby').data('orderbyas')){sort['wpv_sort_orderby_as']=form.find('.js-wpv-sort-control-orderby').data('orderbyas');}else if(sort['wpv_sort_orderby']!=parametric_data['sort']['orderby']){sort['wpv_sort_orderby_as']='';}
break;}}
if(form.find('.js-wpv-sort-control-order').length>0){var order_type=WPViews.view_frontend_utils.get_form_element_type(form.find('.js-wpv-sort-control-order'));switch(order_type){case'select':sort['wpv_sort_order']=form.find('.js-wpv-sort-control-order').val();break;case'radio':sort['wpv_sort_order']=form.find('.js-wpv-sort-control-order:checked').val();break;case'text':case'hidden':sort['wpv_sort_order']=form.find('.js-wpv-sort-control-order').val();break;}}
if(''===sort['wpv_sort_order']&&form.find('.js-wpv-sort-control-orderby').length>0){var order_type=WPViews.view_frontend_utils.get_form_element_type(form.find('.js-wpv-sort-control-orderby'));switch(order_type){case'select':sort['wpv_sort_order']=form.find('.js-wpv-sort-control-orderby option:selected').data('forceorder');break;case'radio':sort['wpv_sort_order']=form.find('.js-wpv-sort-control-orderby:checked').data('forceorder');break;case'text':case'hidden':sort['wpv_sort_order']=form.find('.js-wpv-sort-control-orderby').data('forceorder');break;}}
return sort;}
self.set_sort_data=function(form,sort){self.set_sort_data_inside_form(form,sort).set_sort_data_outside_form(form,sort);return self;};self.set_sort_data_for_pagination=function(form){var sort={},parametric_data=form.data('parametric');;if(form.find('.js-wpv-sort-control-orderby').length>0){var orderby_type=WPViews.view_frontend_utils.get_form_element_type(form.find('.js-wpv-sort-control-orderby'));switch(orderby_type){case'select':sort['orderby']=form.find('.js-wpv-sort-control-orderby').val();if(form.find('.js-wpv-sort-control-orderby option:selected').data('orderbyas')){sort['orderby_as']=form.find('.js-wpv-sort-control-orderby option:selected').data('orderbyas');}else if(sort['orderby']!=parametric_data['sort']['orderby']){sort['orderby_as']='';}
if(form.find('.js-wpv-sort-control-orderby option:selected').data('forceorder')){sort['order']=form.find('.js-wpv-sort-control-orderby option:selected').data('forceorder');}
break;case'radio':sort['orderby']=form.find('.js-wpv-sort-control-orderby:checked').val();if(form.find('.js-wpv-sort-control-orderby:checked').data('orderbyas')){sort['orderby_as']=form.find('.js-wpv-sort-control-orderby:checked').data('orderbyas');}else if(sort['orderby']!=parametric_data['sort']['orderby']){sort['orderby_as']='';}
if(form.find('.js-wpv-sort-control-orderby:checked').data('forceorder')){sort['order']=form.find('.js-wpv-sort-control-orderby:checked').data('forceorder');}
break;case'text':case'hidden':sort['orderby']=form.find('.js-wpv-sort-control-orderby').val();if(form.find('.js-wpv-sort-control-orderby').data('orderbyas')){sort['orderby_as']=form.find('.js-wpv-sort-control-orderby').data('orderbyas');}else if(sort['orderby']!=parametric_data['sort']['orderby']){sort['orderby_as']='';}
if(form.find('.js-wpv-sort-control-orderby').data('forceorder')){sort['order']=form.find('.js-wpv-sort-control-orderby').data('forceorder');}
break;}}
self.set_sort_data(form,sort);};self.set_sort_data_orderby_select=function(orderby_control,sort){if(orderby_control.find('option[value="'+sort['orderby']+'"]').length==0){orderby_control.append($('<option>',{value:sort['orderby'],text:sort['orderby']}));}
orderby_control.val(sort['orderby']);if(_.has(sort,'orderby_as')){orderby_control.find('option:selected').data('orderbyas',sort['orderby_as']).attr('data-orderbyas',sort['orderby_as']);}
return self;};self.set_sort_data_orderby_text=function(orderby_control,sort){orderby_control.val(sort['orderby']);if(_.has(sort,'orderby_as')){orderby_control.data('orderbyas',sort['orderby_as']).attr('data-orderbyas',sort['orderby_as']);}
return self;};self.set_sort_data_orderby_radio=function(orderby_control,sort,form){if(orderby_control.filter('[value="'+sort['orderby']+'"]').length==0){form.append($('<input>',{type:'radio',"class":'js-wpv-sort-control-orderby',name:'wpv_sort_orderby',value:sort['orderby']}));}
form.find('.js-wpv-sort-control-orderby[value="'+sort['orderby']+'"]').prop('checked',true);if(_.has(sort,'orderby_as')){form.find('.js-wpv-sort-control-orderby:checked').data('orderbyas',sort['orderby_as']).attr('data-orderbyas',sort['orderby_as']);}
return self;};self.maybe_set_sort_data_orderby_radio=function(orderby_control,sort){if(orderby_control.filter('[value="'+sort['orderby']+'"]').length==0){orderby_control.prop('checked',false);}else{orderby_control.filter('[value="'+sort['orderby']+'"]').prop('checked',true);if(_.has(sort,'orderby_as')){orderby_control.filter(':checked').data('orderbyas',sort['orderby_as']).attr('data-orderbyas',sort['orderby_as']);}}
return self;};self.set_sort_data_orderby_list=function(orderby_control,sort){var orderby_control_to_set=orderby_control.find('.js-wpv-sort-list-orderby[data-orderby="'+sort['orderby']+'"]');if(orderby_control_to_set.length==0){}else{if(!orderby_control_to_set.closest('.js-wpv-sort-list-item').hasClass('wpv-sort-list-current')){orderby_control.find('span.wpv-sort-list-current').removeClass('wpv-sort-list-current');orderby_control.find('.js-wpv-sort-list-item').css({'display':'none'});orderby_control_to_set.closest('.js-wpv-sort-list-item').addClass('wpv-sort-list-current').css({'display':'block'});orderby_control.find('.js-wpv-sort-list').prepend(orderby_control_to_set.closest('.js-wpv-sort-list-item'));}}
return self;};self.set_sort_data_order_select=function(order_control,sort){if(order_control.find('option[value="'+sort['order']+'"]').length==0){order_control.append($('<option>',{value:sort['order'],text:sort['order']}));}
order_control.val(sort['order']);if(_.has(sort,'orderby')&&typeof order_control.data('labels')!=='undefined'){var order_labels=order_control.data('labels'),order_labels_to_push={},orderby_to_check=sort.orderby.toLowerCase();if(_.has(order_labels,orderby_to_check)){order_labels_to_push=order_labels[orderby_to_check];}else if(_.has(order_labels,'default')){order_labels_to_push=order_labels['default'];}
if(_.has(order_labels_to_push,'asc')){order_control.find('option[value="asc"]').html(order_labels_to_push.asc);}
if(_.has(order_labels_to_push,'desc')){order_control.find('option[value="desc"]').html(order_labels_to_push.desc);}}
return self;};self.set_sort_data_order_text=function(order_control,sort){order_control.val(sort['order']);return self;};self.set_sort_data_order_radio=function(order_control,sort,form){if(order_control.filter('[value="'+sort['order']+'"]').length==0){form.append($('<input>',{type:'radio',"class":'js-wpv-sort-control-order',name:'wpv_sort_order',value:sort['order']}));}
form.find('.js-wpv-sort-control-order[value="'+sort['order']+'"]').prop('checked',true);if(_.has(sort,'orderby')&&typeof order_control.data('labels')!=='undefined'){var order_labels=order_control.data('labels'),order_labels_to_push={},orderby_to_check=sort.orderby.toLowerCase(),label_to_update=null,input_to_keep=null;if(_.has(order_labels,orderby_to_check)){order_labels_to_push=order_labels[orderby_to_check];}else if(_.has(order_labels,'default')){order_labels_to_push=order_labels['default'];}
if(_.has(order_labels_to_push,'asc')){label_to_update=order_control.filter('[value="asc"]').closest('label');input_to_keep=order_control.filter('[value="asc"]').detach();label_to_update.html(order_labels_to_push.asc).prepend(input_to_keep);}
if(_.has(order_labels_to_push,'desc')){label_to_update=order_control.filter('[value="desc"]').closest('label');input_to_keep=order_control.filter('[value="desc"]').detach();label_to_update.html(order_labels_to_push.desc).prepend(input_to_keep);}}
return self;};self.maybe_set_sort_data_order_radio=function(order_control,sort){if(order_control.filter('[value="'+sort['order']+'"]').length==0){order_control.prop('checked',true);}else{order_control.filter('[value="'+sort['order']+'"]').prop('checked',true);}
return self;};self.set_sort_data_order_list=function(order_control,sort){var order_control_to_set=order_control.find('.js-wpv-sort-list-order[data-order="'+sort['order']+'"]');if(order_control_to_set.length==0){}else{if(!order_control_to_set.closest('.js-wpv-sort-list-item').hasClass('wpv-sort-list-current')){order_control.find('span.wpv-sort-list-current').removeClass('wpv-sort-list-current');order_control.find('.js-wpv-sort-list-item').css({'display':'none'});order_control_to_set.closest('.js-wpv-sort-list-item').addClass('wpv-sort-list-current').css({'display':'block'});order_control.find('.js-wpv-sort-list').prepend(order_control_to_set.closest('.js-wpv-sort-list-item'));}}
if(_.has(sort,'orderby')&&typeof order_control.data('labels')!=='undefined'){var order_labels=order_control.data('labels'),order_labels_to_push={},orderby_to_check=sort.orderby.toLowerCase(),width_update_needed=false;if(_.has(order_labels,orderby_to_check)){order_labels_to_push=order_labels[orderby_to_check];}else if(_.has(order_labels,'default')){order_labels_to_push=order_labels['default'];}
if(_.has(order_labels_to_push,'asc')){order_control.find('.js-wpv-sort-list-order[data-order="asc"] span').html(order_labels_to_push.asc);width_update_needed=true;}
if(_.has(order_labels_to_push,'desc')){order_control.find('.js-wpv-sort-list-order[data-order="desc"] span').html(order_labels_to_push.desc);width_update_needed=true;}
if(width_update_needed){self.adjust_sort_list_width(order_control);}}
return self;};self.set_sort_data_inside_form=function(form,sort){if(_.has(sort,'orderby')){if(form.find('.js-wpv-sort-control-orderby').length>0){var orderby_control=form.find('.js-wpv-sort-control-orderby'),orderby_type=WPViews.view_frontend_utils.get_form_element_type(orderby_control);switch(orderby_type){case'select':self.set_sort_data_orderby_select(orderby_control,sort);break;case'text':case'hidden':self.set_sort_data_orderby_text(orderby_control,sort);break;case'radio':self.set_sort_data_orderby_radio(orderby_control,sort,form);break;}}else{var orderby_attributes={type:'hidden',"class":'js-wpv-sort-control-orderby',name:'wpv_sort_orderby',value:sort['orderby']};if(_.has(sort,'orderby_as')){orderby_attributes['data-orderbyas']=sort['orderby_as'];}
if(_.has(sort,'forceorder')){orderby_attributes['data-forceorder']=sort['forceorder'];}
$('<input>').attr(orderby_attributes).appendTo(form);}
if(_.has(sort,'orderby_as')){if(form.find('.js-wpv-sort-control-orderby-as').length>0){form.find('.js-wpv-sort-control-orderby-as').remove();}
$('<input>').attr({type:'hidden',"class":'js-wpv-sort-control-orderby-as',name:'wpv_sort_orderby_as',value:sort['orderby_as']}).appendTo(form);}
if(form.find('.js-wpv-sort-list-orderby-dropdown').length>0){var orderby_list_control=form.find('.js-wpv-sort-list-orderby-dropdown');self.set_sort_data_orderby_list(orderby_list_control,sort);}}
if(_.has(sort,'order')){if(form.find('.js-wpv-sort-control-order').length>0){var order_control=form.find('.js-wpv-sort-control-order'),order_type=WPViews.view_frontend_utils.get_form_element_type(order_control);switch(order_type){case'select':self.set_sort_data_order_select(order_control,sort);break;case'text':case'hidden':self.set_sort_data_order_text(order_control,sort);break;case'radio':self.set_sort_data_order_radio(order_control,sort,form);break;}}else{$('<input>').attr({type:'hidden',"class":'js-wpv-sort-control-order',name:'wpv_sort_order',value:sort['order']}).appendTo(form);}
if(form.find('.js-wpv-sort-list-order-dropdown').length>0){var order_list_control=form.find('.js-wpv-sort-list-order-dropdown');self.set_sort_data_order_list(order_list_control,sort);}}
return self;}
self.set_sort_data_outside_form=function(form,sort){var view_number=form.data('viewnumber');if(_.has(sort,'orderby')){var extra_orderby=$('.js-wpv-sort-control-orderby[data-viewnumber="'+view_number+'"]:not(.js-wpv-filter-form .js-wpv-sort-control-orderby)'),extra_orderby_list=$('.js-wpv-sort-list-orderby-dropdown[data-viewnumber="'+view_number+'"]:not(.js-wpv-filter-form .js-wpv-sort-list-orderby-dropdown)');if(extra_orderby.length>0){var orderby_type=WPViews.view_frontend_utils.get_form_element_type(extra_orderby);switch(orderby_type){case'select':self.set_sort_data_orderby_select(extra_orderby,sort);break;case'text':case'hidden':self.set_sort_data_orderby_text(extra_orderby,sort);break;case'radio':self.maybe_set_sort_data_orderby_radio(extra_orderby,sort);break;}}
if(extra_orderby_list.length>0){self.set_sort_data_orderby_list(extra_orderby_list,sort);}}
if(_.has(sort,'order')){var extra_order=$('.js-wpv-sort-control-order[data-viewnumber="'+view_number+'"]:not(.js-wpv-filter-form .js-wpv-sort-control-order)'),extra_order_list=$('.js-wpv-sort-list-order-dropdown[data-viewnumber="'+view_number+'"]:not(.js-wpv-filter-form .js-wpv-sort-list-order-dropdown)');if(extra_order.length>0){var order_type=WPViews.view_frontend_utils.get_form_element_type(extra_order);switch(order_type){case'select':self.set_sort_data_order_select(extra_order,sort);break;case'text':case'hidden':self.set_sort_data_order_text(extra_order,sort);break;case'radio':self.maybe_set_sort_data_order_radio(extra_order,sort);break;}}
if(extra_order_list.length>0){self.set_sort_data_order_list(extra_order_list,sort);}}
return self;};$(document).on('click','.js-wpv-sort-trigger',function(e){e.preventDefault();var thiz=$(this),view_number=thiz.data('viewnumber'),form=$('.js-wpv-filter-form-'+view_number),sort={'orderby':(typeof thiz.data('orderby')!='undefined')?thiz.data('orderby'):'','order':(typeof thiz.data('order')!='undefined')?thiz.data('order'):'','orderby_as':(typeof thiz.data('orderbyas')!='undefined')?thiz.data('orderbyas'):'',},form_each;form.each(function(){form_each=$(this);self.set_sort_data(form_each,sort);WPViews.view_frontend_utils.set_extra_url_query_parameters_by_form(form_each);});if(thiz.hasClass('js-wpv-column-header-click')||(!form.hasClass('js-wpv-ajax-results-enabled')&&!form.hasClass('js-wpv-ajax-results-submit-enabled'))){form.submit();}else{var data_for_events={view_unique_id:view_number,form:form,force_results_update:form.hasClass('js-wpv-ajax-results-submit-enabled')};data_for_events=WPViews.view_parametric_search.extend_wpv_parametric_search_triggered_data(data_for_events);$(document).trigger('js_event_wpv_parametric_search_triggered',[data_for_events]);}});$(document).on('change','select.js-wpv-sort-control-orderby',function(){var thiz=$(this),thiz_selected=thiz.find(':selected'),sort={},view_number=thiz.data('viewnumber'),form=$('.js-wpv-filter-form-'+view_number),data_for_events={view_unique_id:view_number,form:form};sort['orderby']=thiz.val();if(thiz_selected.data('orderbyas')!==undefined){sort['orderby_as']=thiz_selected.data('orderbyas');}
if(thiz_selected.data('forceorder')!==undefined&&thiz_selected.data('forceorder')!==''){sort['order']=thiz_selected.data('forceorder');}
self.set_sort_data(form,sort);wpv_stop_rollover[view_number]=true;data_for_events=WPViews.view_parametric_search.extend_wpv_parametric_search_triggered_data(data_for_events);$(document).trigger('js_event_wpv_parametric_search_triggered',[data_for_events]);});$(document).on('change','input.js-wpv-sort-control-orderby',function(){var thiz=$(this),sort={},view_number=thiz.data('viewnumber'),sort_control=$('.js-wpv-sort-control-orderby[data-viewnumber="'+view_number+'"]:checked'),form=$('.js-wpv-filter-form-'+view_number),data_for_events={view_unique_id:view_number,form:form};sort['orderby']=sort_control.val();if(sort_control.data('orderbyas')!==undefined){sort['orderby_as']=sort_control.data('orderbyas');}
if(sort_control.data('forceorder')!==undefined&&sort_control.data('forceorder')!==''){sort['order']=sort_control.data('forceorder');}
self.set_sort_data(form,sort);wpv_stop_rollover[view_number]=true;data_for_events=WPViews.view_parametric_search.extend_wpv_parametric_search_triggered_data(data_for_events);$(document).trigger('js_event_wpv_parametric_search_triggered',[data_for_events]);});$(document).on('click','.js-wpv-sort-list-orderby',function(e){e.preventDefault();var orderby_link=$(this),orderby=orderby_link.data('orderby'),orderby_as=orderby_link.data('orderbyas'),orderby_order=orderby_link.data('forceorder'),orderby_list=orderby_link.closest('.wpv-sort-list'),orderby_list_item=orderby_link.closest('span.js-wpv-sort-list-item'),view_number=orderby_link.data('viewnumber'),form=$('.js-wpv-filter-form-'+view_number),sort={'orderby':orderby,'orderby_as':orderby_as},data_for_events={view_unique_id:view_number,form:form};if(orderby_list_item.hasClass('wpv-sort-list-current')){return;}
orderby_list.find('span.wpv-sort-list-current').removeClass('wpv-sort-list-current');orderby_list.find('.js-wpv-sort-list-item').css({'display':'none'});orderby_list_item.addClass('wpv-sort-list-current').css({'display':'block'});orderby_list.prepend(orderby_list_item);if(orderby_order!==''){sort['order']=orderby_order;}
self.set_sort_data(form,sort);wpv_stop_rollover[view_number]=true;data_for_events=WPViews.view_parametric_search.extend_wpv_parametric_search_triggered_data(data_for_events);$(document).trigger('js_event_wpv_parametric_search_triggered',[data_for_events]);});$(document).on('change','select.js-wpv-sort-control-order',function(){var thiz=$(this),sort={},view_number=thiz.data('viewnumber'),form=$('.js-wpv-filter-form-'+view_number),data_for_events={view_unique_id:view_number,form:form};sort['order']=thiz.val();self.set_sort_data(form,sort);wpv_stop_rollover[view_number]=true;data_for_events=WPViews.view_parametric_search.extend_wpv_parametric_search_triggered_data(data_for_events);$(document).trigger('js_event_wpv_parametric_search_triggered',[data_for_events]);});$(document).on('change','input.js-wpv-sort-control-order',function(){var thiz=$(this),sort={},view_number=thiz.data('viewnumber'),sort_control=$('.js-wpv-sort-control-order[data-viewnumber="'+view_number+'"]:checked'),form=$('.js-wpv-filter-form-'+view_number),data_for_events={view_unique_id:view_number,form:form};sort['order']=sort_control.val();self.set_sort_data(form,sort);wpv_stop_rollover[view_number]=true;data_for_events=WPViews.view_parametric_search.extend_wpv_parametric_search_triggered_data(data_for_events);$(document).trigger('js_event_wpv_parametric_search_triggered',[data_for_events]);});$(document).on('click','.js-wpv-sort-list-order',function(e){e.preventDefault();var order_link=$(this),order=order_link.data('order'),order_list=order_link.closest('.wpv-sort-list'),order_list_item=order_link.closest('span.js-wpv-sort-list-item'),view_number=order_link.data('viewnumber'),form=$('.js-wpv-filter-form-'+view_number),sort={'order':order},data_for_events={view_unique_id:view_number,form:form};if(order_list_item.hasClass('wpv-sort-list-current')){return;}
order_list.find('span.wpv-sort-list-current').removeClass('wpv-sort-list-current');order_list.find('.js-wpv-sort-list-item').css({'display':'none'});order_list_item.addClass('wpv-sort-list-current').css({'display':'block'});order_list.prepend(order_list_item);self.set_sort_data(form,sort);wpv_stop_rollover[view_number]=true;data_for_events=WPViews.view_parametric_search.extend_wpv_parametric_search_triggered_data(data_for_events);$(document).trigger('js_event_wpv_parametric_search_triggered',[data_for_events]);});$(document).on('mouseenter','.js-wpv-sort-list-dropdown',function(){var orderby_list=$(this);orderby_list.find('.js-wpv-sort-list-item').css({'display':'block'});});$(document).on('mouseleave','.js-wpv-sort-list-dropdown',function(){var orderby_list=$(this);orderby_list.find('.js-wpv-sort-list-item:not(.wpv-sort-list-current)').css({'display':'none'});});self.init_sort_list_width=function(selector){};self.adjust_sort_list_width=function(selector){var sort_list=selector,sort_list_width=0,sort_list_items=sort_list.find('.js-wpv-sort-list-item'),sort_list_anchors=sort_list.find('.wpv-sort-list-anchor span');sort_list_anchors.each(function(){var item_width=$(this).text().length;if(item_width>sort_list_width){sort_list_width=item_width;}});sort_list_width=(sort_list_width<10)?sort_list_width+1:sort_list_width;sort_list.css({'width':sort_list_width+'em'});sort_list_items.css({'width':sort_list_width+'em'});};self.maybe_init_sort_data=function(selector){selector.find('.js-wpv-sort-list-dropdown').each(function(){var sorting_list=$(this),sorting_list_type=sorting_list.hasClass('wpv-sort-list-orderby-dropdown')?'orderby':'order';switch(sorting_list_type){case'orderby':var sorting_current=sorting_list.find('.wpv-sort-list-current .js-wpv-sort-list-orderby'),sorting_viewnumber=sorting_current.data('viewnumber'),sorting_form=$('.js-wpv-filter-form-'+sorting_viewnumber),sorting_data={orderby:sorting_current.data('orderby'),orderby_as:sorting_current.data('orderbyas'),forceorder:sorting_current.data('forceorder')};self.set_sort_data(sorting_form,sorting_data);break;case'order':var sorting_current=sorting_list.find('.wpv-sort-list-current .js-wpv-sort-list-order'),sorting_viewnumber=sorting_current.data('viewnumber'),sorting_form=$('.js-wpv-filter-form-'+sorting_viewnumber),sorting_data={order:sorting_current.data('order'),};self.set_sort_data(sorting_form,sorting_data);break;}});selector.find('select.js-wpv-sort-control-orderby').each(function(){var sorting_control=$(this);if(sorting_control.closest('.js-wpv-filter-form').length==0){var sorting_viewnumber=sorting_control.data('viewnumber'),sorting_form=$('.js-wpv-filter-form-'+sorting_viewnumber),sorting_data={orderby:sorting_control.val()};if(sorting_control.find(':selected').data('orderbyas')!==undefined){sorting_data['orderby_as']=sorting_control.find(':selected').data('orderbyas');}
self.set_sort_data(sorting_form,sorting_data);}});selector.find('select.js-wpv-sort-control-order').each(function(){var sorting_control=$(this);if(sorting_control.closest('.js-wpv-filter-form').length==0){var sorting_viewnumber=sorting_control.data('viewnumber'),sorting_form=$('.js-wpv-filter-form-'+sorting_viewnumber),sorting_data={order:sorting_control.val()};self.set_sort_data(sorting_form,sorting_data);}});selector.find('input.js-wpv-sort-control-orderby:checked').each(function(){var sorting_control=$(this);if(sorting_control.closest('.js-wpv-filter-form').length==0){var sorting_viewnumber=sorting_control.data('viewnumber'),sorting_form=$('.js-wpv-filter-form-'+sorting_viewnumber),sorting_data={orderby:sorting_control.val()};if(sorting_control.data('orderbyas')!==undefined){sorting_data['orderby_as']=sorting_control.data('orderbyas');}
self.set_sort_data(sorting_form,sorting_data);}});selector.find('input.js-wpv-sort-control-order:checked').each(function(){var sorting_control=$(this);if(sorting_control.closest('.js-wpv-filter-form').length==0){var sorting_viewnumber=sorting_control.data('viewnumber'),sorting_form=$('.js-wpv-filter-form-'+sorting_viewnumber),sorting_data={order:sorting_control.val()};self.set_sort_data(sorting_form,sorting_data);}});};$(document).on('js_event_wpv_pagination_completed',function(event,data){self.maybe_init_sort_data(data.layout);if(data.filter){self.maybe_init_sort_data(data.filter);}});$(document).on('js_event_wpv_parametric_search_form_updated',function(event,data){self.maybe_init_sort_data(data.view_changed_form);});$(document).on('js_event_wpv_parametric_search_results_updated',function(event,data){self.maybe_init_sort_data(data.layout);});self.init=function(){self.maybe_init_sort_data($('body'));};self.init();};WPViews.ViewPagination=function($){var self=this;self.rollover_running=[];self.rollover_stopped=[];self.rollover_paused=[];self.init_rollover_timing_fired=false;self.pagination_queue={};self.pagination_effects={};self.pagination_effects_conditions={};self.pagination_effects_spinner={};self.paged_views={};self.paged_views_initial_page={};self.last_paginated_view=[];self.paginated_history_reach=0;self.add_paginated_history=true;self.pagination_effect_state_push=['fade','slidev','slideh'];self.pagination_effect_state_replace=[];self.pagination_effect_state_keep=['infinite'];self.init_scrolling_event_fired=false;self.slide_data_defaults={view_number:'',page:0,max_pages:0,speed:500,next:true,effect:'fade',response:null,wpvPaginatorFilter:null,wpvPaginatorLayout:null,responseFilter:null,responseView:null,callback_next_func:WPViews.view_frontend_utils.just_return};self.pagination_doing_ajax=[];self.add_view_parameters=function(data,page,view_number){var this_form=$('form.js-wpv-filter-form-'+view_number),this_prelements=this_form.find('.js-wpv-post-relationship-update'),this_form_environment=this_form.data('environment');data['action']='wpv_get_page';data['page']=page;data['view_number']=view_number;data['wpv_sort_orderby']=(typeof this_form.data('orderby')!='undefined')?this_form.data('orderby'):'';data['wpv_sort_order']=(typeof this_form.data('order')!='undefined')?this_form.data('order'):'';data['wpv_sort_orderby_as']=(typeof this_form.data('orderbyas')!='undefined')?this_form.data('orderbyas'):'';data['wpv_sort_orderby_second']=(typeof this_form.data('orderbysecond')!='undefined')?this_form.data('orderbysecond'):'';data['wpv_sort_order_second']=(typeof this_form.data('ordersecond')!='undefined')?this_form.data('ordersecond'):'';data['wpv_view_widget_id']=this_form.data('viewwidgetid');data['view_hash']=this_form.data('viewhash');data['dps_pr']={};data['dps_general']={};if(this_form_environment.current_post_id>0){data['wpv_aux_current_post_id']=this_form_environment.current_post_id;}
if(this_form_environment.parent_post_id>0){data['wpv_aux_parent_post_id']=this_form_environment.parent_post_id;}
if(this_form_environment.parent_term_id>0){data['wpv_aux_parent_term_id']=this_form_environment.parent_term_id;}
if(this_form_environment.parent_user_id>0){data['wpv_aux_parent_user_id']=this_form_environment.parent_user_id;}
if(this_prelements.length){data['dps_pr']=this_prelements.serializeArray();}
if(this_form.hasClass('js-wpv-dps-enabled')||this_form.hasClass('js-wpv-ajax-results-enabled')){data['dps_general']=this_form.find('.js-wpv-filter-trigger, .js-wpv-filter-trigger-delayed').serializeArray();}
return data;};self.pagination_preload_pages=function(preload_data){var page=parseInt(preload_data.page,10),max_pages=parseInt(preload_data.max_pages,10),max_reach=parseInt(preload_data.max_reach,10);if(max_reach>max_pages){max_reach=max_pages;}
if(preload_data.preload_pages=='enabled'){var reach=1;while(reach<max_reach){self.pagination_preload_next_page(preload_data.view_number,page,max_pages,reach);self.pagination_preload_previous_page(preload_data.view_number,page,max_pages,reach);reach++;}}
if(preload_data.cache_pages=='enabled'){self.pagination_cache_current_page(preload_data.view_number,page);}};self.pagination_cache_current_page=function(view_number,page){window.wpvCachedPages[view_number]=window.wpvCachedPages[view_number]||[];var current_page_permalink,content;icl_lang=(typeof icl_lang=='undefined')?false:icl_lang;if(!window.wpvCachedPages[view_number].hasOwnProperty(page)){WPViews.view_frontend_utils.get_updated_query_results(view_number,page,$('form.js-wpv-filter-form-'+view_number),'full').done(function(response){if(response.success){window.wpvCachedPages[view_number][page]=response.data.full;content=$(response.data.full).find('img');content.each(function(){window.wpvCachedImages.push(this.src);});}});}};self.pagination_preload_next_page=function(view_number,page,max_pages,reach){window.wpvCachedPages[view_number]=window.wpvCachedPages[view_number]||[];var next_page=page+reach,content,current_page_permalink;icl_lang=(typeof icl_lang=='undefined')?false:icl_lang;if(!window.wpvCachedPages[view_number].hasOwnProperty(next_page)){if((next_page-1)<max_pages){WPViews.view_frontend_utils.get_updated_query_results(view_number,next_page,$('form.js-wpv-filter-form-'+view_number),'full').done(function(response){if(response.success){window.wpvCachedPages[view_number][next_page]=response.data.full;content=$(response.data.full).find('img');content.each(function(){window.wpvCachedImages.push(this.src);});}});}}};self.pagination_preload_previous_page=function(view_number,page,max_pages,reach){window.wpvCachedPages[view_number]=window.wpvCachedPages[view_number]||[];var previous_page=page-reach,current_page_permalink,content;icl_lang=(typeof icl_lang=='undefined')?false:icl_lang;if(!window.wpvCachedPages[view_number].hasOwnProperty(previous_page)){if((previous_page+1)>1){WPViews.view_frontend_utils.get_updated_query_results(view_number,previous_page,$('form.js-wpv-filter-form-'+view_number),'full').done(function(response){if(response.success){window.wpvCachedPages[view_number][previous_page]=response.data.full;content=$(response.data.full).find('img');content.each(function(){window.wpvCachedImages.push(this.src);});}});}else if((previous_page+1)===1){WPViews.view_frontend_utils.get_updated_query_results(view_number,max_pages,$('form.js-wpv-filter-form-'+view_number),'full').done(function(response){if(response.success){window.wpvCachedPages[view_number][max_pages]=response.data.full;window.wpvCachedPages[view_number][0]=response.data.full;content=$(response.data.full).find('img');content.each(function(){window.wpvCachedImages.push(this.src);});}});}}};self.trigger_pagination=function(view_number,page){if(!window.wpvPaginationAnimationFinished.hasOwnProperty(view_number)){window.wpvPaginationAnimationFinished[view_number]=false;}else if(window.wpvPaginationAnimationFinished[view_number]!==true){if(!window.wpvPaginationQueue.hasOwnProperty(view_number)){window.wpvPaginationQueue[view_number]=[];}
window.wpvPaginationQueue[view_number].push(arguments);return;}
window.wpvPaginationAnimationFinished[view_number]=false;var data={},wpvPaginatorLayout=$('#wpv-view-layout-'+view_number),wpvPaginatorFilter=$('form[name="wpv-filter-'+view_number+'"]'),speed=500,next=true,paged_view_data=self.get_paged_view(view_number),max_reach=parseInt(paged_view_data.preload_reach)+1,callback_next_func=WPViews.view_frontend_utils.just_return,data_for_get_page,img;if(paged_view_data.type=='disabled'||paged_view_data.type=='paged'){switch(paged_view_data.query){case'archive':current_page_permalink=paged_view_data['base_permalink'].replace('WPV_PAGE_NUM',page);window.location.replace(current_page_permalink);break;default:WPViews.view_frontend_utils.set_extra_url_query_parameters_by_form(wpvPaginatorFilter);if($('input[name="wpv_paged"]').length>0){$('input[name="wpv_paged"]').attr('value',page);}else{$('<input>').attr({type:'hidden',name:'wpv_paged',value:page}).appendTo(wpvPaginatorFilter);}
wpvPaginatorFilter[0].submit();break;}
return;}
if(paged_view_data.effect in self.pagination_effects_conditions){if(!self.pagination_effects_conditions[paged_view_data.effect](paged_view_data,page)){window.wpvPaginationAnimationFinished[view_number]=true;return;}}
window.wpvPaginationAjaxLoaded[view_number]=false;window.wpvCachedPages[view_number]=window.wpvCachedPages[view_number]||[];if(this.historyP.hasOwnProperty(view_number)){next=(this.historyP[view_number]<page)?true:false;}
if(paged_view_data.callback_next!==''){callback_next_func=window[paged_view_data.callback_next];if(typeof callback_next_func!=="function"){callback_next_func=WPViews.view_frontend_utils.just_return;}}
data_for_get_page={view_number:view_number,page:page,max_pages:parseInt(paged_view_data.max_pages,10),speed:parseFloat(paged_view_data.duration),next:next,effect:paged_view_data.effect,wpvPaginatorFilter:wpvPaginatorFilter,wpvPaginatorLayout:wpvPaginatorLayout,responseView:null,callback_next_func:callback_next_func};if(window.wpvCachedPages[view_number].hasOwnProperty(page)){data_for_get_page.response=window.wpvCachedPages[view_number][page];self.prepare_slide(data_for_get_page);}else{if(paged_view_data.spinner!=='disabled'){if(paged_view_data.effect in self.pagination_effects_spinner){self.pagination_effects_spinner[paged_view_data.effect](view_number,wpvPaginatorLayout);}else{self.pagination_effects_spinner['fade'](view_number,wpvPaginatorLayout);}}
WPViews.view_frontend_utils.get_updated_query_results(view_number,page,$('form.js-wpv-filter-form-'+view_number),'full').done(function(response){if(response.success){data_for_get_page.response=response.data.full;self.prepare_slide(data_for_get_page);}});}
self.pagination_preload_pages({view_number:view_number,cache_pages:paged_view_data.cache_pages,preload_pages:paged_view_data.preload_pages,page:page,max_reach:max_reach,max_pages:paged_view_data.max_pages});this.historyP[view_number]=page;return;};self.prepare_slide=function(data){var slide_data=$.extend({},self.slide_data_defaults,data),width=slide_data.wpvPaginatorLayout.width(),outer_width=slide_data.wpvPaginatorLayout.outerWidth(),height=slide_data.wpvPaginatorLayout.height(),outer_height=slide_data.wpvPaginatorLayout.outerHeight(),responseObj=$('<div></div>').append(slide_data.response),preloadedImages,images;slide_data.responseView=responseObj.find('.js-wpv-view-layout-'+slide_data.view_number);slide_data.responseFilterSelector=responseObj.find('form.js-wpv-filter-form-'+slide_data.view_number);slide_data.responseFilter=responseObj.find('form.js-wpv-filter-form-'+slide_data.view_number).html();slide_data.pagination_page_permalink=slide_data.responseView.data('permalink');slide_data.wpvPaginatorLayout.attr('id','wpv-view-layout-'+slide_data.view_number+'-response').wrap('<div class="wpv_slide_remove" style="width:'+outer_width+'px;height:'+outer_height+'px;overflow:hidden;" />').css('width',width);slide_data.responseView.attr('id','wpv-view-layout-'+slide_data.view_number).css({'visibility':'hidden','width':width});if(slide_data.wpvPaginatorLayout.hasClass('js-wpv-layout-preload-images')){preloadedImages=[];images=slide_data.responseView.find('img');if(images.length<1){self.pagination_slide(slide_data);}else{images.one('load',function(){preloadedImages.push($(this).attr('src'));if(preloadedImages.length===images.length){self.pagination_slide(slide_data);}}).each(function(){$(this).load();});}
slide_data.responseView.find('.js-wpv-layout-preload-images').css('visibility','visible');}else{self.pagination_slide(slide_data);}};self.pagination_slide=function(data){var slide_data=$.extend({},self.slide_data_defaults,data);switch(slide_data.effect){case'slideleft':slide_data.next=true;slide_data.effect='slideh';break;case'slideright':case'sliderightforward':slide_data.next=false;slide_data.effect='slideh';break;case'slidedown':case'slidedownforward':slide_data.next=false;slide_data.effect='slidev';break;case'slideup':slide_data.next=true;slide_data.effect='slidev';break;}
if(!slide_data.effect in self.pagination_effects){slide_data.effect='fade';}
self.pagination_effects[slide_data.effect](slide_data);};self.pagination_queue_trigger=function(view_number,next,wpvPaginatorFilter){var args,page,max_pages;if(window.wpvPaginationQueue.hasOwnProperty(view_number)&&window.wpvPaginationQueue[view_number].length>0){window.wpvPaginationQueue[view_number].sort();args=window.wpvPaginationQueue[view_number][0];window.wpvPaginationQueue[view_number].splice(0,1);page=args[1];max_pages=args[4];if(page>max_pages){page=1;}else if(page<1){page=max_pages;}
self.trigger_pagination(view_number,page);}};$(document).on('click','.js-wpv-pagination-next-link, .js-wpv-pagination-previous-link, .js-wpv-pagination-first-link, .js-wpv-pagination-last-link',function(e){e.preventDefault();var thiz=$(this),view_number=thiz.data('viewnumber'),page=thiz.data('page'),form=$('.js-wpv-filter-form-'+view_number);WPViews.view_sorting.set_sort_data_for_pagination(form);wpv_stop_rollover[view_number]=true;self.trigger_pagination(view_number,page);});$(document).on('change','.js-wpv-page-selector',function(e){e.preventDefault();var thiz=$(this),view_number=thiz.data('viewnumber'),page=thiz.val();wpv_stop_rollover[view_number]=true
self.trigger_pagination(view_number,page);});$(document).on('click','.js-wpv-pagination-link',function(e){e.preventDefault();var thiz=$(this),data_collected={};data_collected.view_number=thiz.data('viewnumber');data_collected.page=thiz.data('page');var i;for(i=1;i<=data_collected.max_pages;i++){if(i===data_collected.page){$('.js-wpv-page-link-'+data_collected.view_number+'-'+i).addClass('wpv_page_current');}else{$('.js-wpv-page-link-'+data_collected.view_number+'-'+i).removeClass('wpv_page_current');}}
wpv_stop_rollover[data_collected.view_number]=true
self.trigger_pagination(data_collected.view_number,data_collected.page);});$(document).on('click','.js-wpv-archive-pagination-link, .js-wpv-archive-pagination-next-link, .js-wpv-archive-pagination-prev-link, .js-wpv-archive-pagination-links-next-link, .js-wpv-archive-pagination-links-prev-link, .js-wpv-archive-pagination-links-first-link, .js-wpv-archive-pagination-links-last-link',function(e){e.preventDefault();var thiz=$(this),view_number=thiz.data('viewnumber'),page=thiz.data('page');wpv_stop_rollover[view_number]=true;self.trigger_pagination(view_number,page);});$(document).on('js_event_wpv_pagination_completed',function(event,data){WPViews.view_frontend_utils.render_frontend_media_shortcodes(data.layout);WPViews.view_frontend_utils.render_frontend_datepicker();self.init_paged_views(data.layout);self.init_preload_images(data.layout);self.init_preload_pages(data.layout);self.init_pagination_button_state();});$(document).on('js_event_wpv_parametric_search_results_updated',function(event,data){self.init_paged_view(data.view_unique_id);self.init_paged_views(data.layout);self.init_preload_images(data.layout);self.init_preload_pages(data.layout);});self.init_effects=function(){self.pagination_effects={infinite:function(slide_data){if(slide_data.page!=(self.get_paged_view(slide_data.view_number).page+1)){$('.js-wpv_slide_loading_img_'+slide_data.view_number).fadeOut(function(){$(this).remove();});slide_data.wpvPaginatorLayout.animate({opacity:1},300).unwrap().attr('id','wpv-view-layout-'+slide_data.view_number);window.wpvPaginationAjaxLoaded[slide_data.view_number]=true;window.wpvPaginationAnimationFinished[slide_data.view_number]=true;}else{var data_for_events={},data_for_history={};data_for_events.view_unique_id=slide_data.view_number;data_for_events.effect='infinite';data_for_events.speed=slide_data.speed;data_for_history.view_number=slide_data.view_number;data_for_history.page=slide_data.page;data_for_history.effect='infinite';data_for_history.pagination_page_permalink=slide_data.pagination_page_permalink;if(slide_data.wpvPaginatorLayout.find('.js-wpv-loop').length>0&&slide_data.responseView.find('.js-wpv-loop').length>0){slide_data.responseView.find('.js-wpv-loop').children().addClass('wpv-loop-item-blink').css({'opacity':'0.3'});slide_data.responseView.find('.js-wpv-loop').prepend(slide_data.wpvPaginatorLayout.find('.js-wpv-loop').html());slide_data.wpvPaginatorLayout.html(slide_data.responseView.html());slide_data.wpvPaginatorLayout.find('.wpv-loop-item-blink').removeClass('wpv-loop-item-blink').animate({opacity:1},slide_data.speed);}else{var oldHTML=slide_data.wpvPaginatorLayout.html(),oldArray=oldHTML.split('<!-- WPV_Infinite_Scroll -->',3),oldReplace=(oldArray.length>2)?oldArray[1]:'';slide_data.wpvPaginatorLayout.html(slide_data.responseView.html().replace('<!-- WPV_Infinite_Scroll_Insert -->',oldReplace));}
data_for_events.layout=slide_data.wpvPaginatorLayout;$('.js-wpv_slide_loading_img_'+slide_data.view_number).fadeOut(function(){$(this).remove();});slide_data.wpvPaginatorLayout.unwrap().attr('id','wpv-view-layout-'+slide_data.view_number).animate({opacity:1},300,function(){slide_data.wpvPaginatorFilter.html(slide_data.responseFilter);self.get_paged_view(slide_data.view_number).page=slide_data.page;window.wpvPaginationAjaxLoaded[slide_data.view_number]=true;window.wpvPaginationAnimationFinished[slide_data.view_number]=true;slide_data.callback_next_func();self.manage_browser_history(data_for_history);$(document).trigger('js_event_wpv_pagination_completed',[data_for_events]);self.pagination_queue_trigger(slide_data.view_number,slide_data.next,slide_data.wpvPaginatorFilter);});}},slideh:function(slide_data){var height=slide_data.wpvPaginatorLayout.height(),old_height=slide_data.wpvPaginatorLayout.outerHeight(),new_height,data_for_events={},data_for_history={};data_for_events.view_unique_id=slide_data.view_number;data_for_events.effect='slideh';data_for_events.speed=slide_data.speed;data_for_events.layout=slide_data.responseView;data_for_events.filter=slide_data.responseFilterSelector;data_for_history.view_number=slide_data.view_number;data_for_history.page=slide_data.page;data_for_history.effect='slideh';data_for_history.pagination_page_permalink=slide_data.pagination_page_permalink;if(slide_data.next===true){slide_data.wpvPaginatorLayout.css('float','left');slide_data.responseView.css({"float":"left","visibility":"visible"});slide_data.wpvPaginatorLayout.after(slide_data.responseView).parent().children().wrapAll('<div style="width:5000px;" />');$('.js-wpv_slide_loading_img_'+slide_data.view_number).fadeOut(function(){$(this).remove();});new_height=slide_data.responseView.outerHeight();if(old_height===new_height){slide_data.wpvPaginatorLayout.parent().animate({marginLeft:'-'+slide_data.wpvPaginatorLayout.outerWidth()+'px'},slide_data.speed+500,function(){slide_data.responseView.css({'position':'static','float':'none'});slide_data.wpvPaginatorLayout.unwrap().unwrap().remove();slide_data.wpvPaginatorFilter.html(slide_data.responseFilter);window.wpvPaginationAjaxLoaded[slide_data.view_number]=true;window.wpvPaginationAnimationFinished[slide_data.view_number]=true;slide_data.callback_next_func();self.manage_browser_history(data_for_history);$(document).trigger('js_event_wpv_pagination_completed',[data_for_events]);self.pagination_queue_trigger(slide_data.view_number,slide_data.next,slide_data.wpvPaginatorFilter);});}else if(old_height>new_height){slide_data.wpvPaginatorLayout.parent().animate({marginLeft:'-'+slide_data.wpvPaginatorLayout.outerWidth()+'px'},slide_data.speed+500,function(){slide_data.wpvPaginatorLayout.parent().parent().animate({height:slide_data.responseView.outerHeight()+'px'},slide_data.speed/2,function(){slide_data.responseView.css({'position':'static','float':'none'});slide_data.wpvPaginatorLayout.unwrap().unwrap().remove();slide_data.wpvPaginatorFilter.html(slide_data.responseFilter);window.wpvPaginationAjaxLoaded[slide_data.view_number]=true;window.wpvPaginationAnimationFinished[slide_data.view_number]=true;slide_data.callback_next_func();self.manage_browser_history(data_for_history);$(document).trigger('js_event_wpv_pagination_completed',[data_for_events]);self.pagination_queue_trigger(slide_data.view_number,slide_data.next,slide_data.wpvPaginatorFilter);});});}else{slide_data.wpvPaginatorLayout.parent().parent().animate({height:slide_data.responseView.outerHeight()+'px'},slide_data.speed/2,function(){slide_data.wpvPaginatorLayout.parent().animate({marginLeft:'-'+slide_data.wpvPaginatorLayout.outerWidth()+'px'},slide_data.speed+500,function(){slide_data.responseView.css({'position':'static','float':'none'});slide_data.wpvPaginatorLayout.unwrap().unwrap().remove();slide_data.wpvPaginatorFilter.html(slide_data.responseFilter);window.wpvPaginationAjaxLoaded[slide_data.view_number]=true;window.wpvPaginationAnimationFinished[slide_data.view_number]=true;slide_data.callback_next_func();self.manage_browser_history(data_for_history);$(document).trigger('js_event_wpv_pagination_completed',[data_for_events]);self.pagination_queue_trigger(slide_data.view_number,slide_data.next,slide_data.wpvPaginatorFilter);});});}}else{slide_data.wpvPaginatorLayout.css('float','right');slide_data.responseView.css({'float':'right','visibility':'visible'});slide_data.wpvPaginatorLayout.after(slide_data.responseView).parent().children().wrapAll('<div style="height:'+height+';width:'+(slide_data.responseView.outerWidth()+slide_data.wpvPaginatorLayout.outerWidth())+'px; margin-left:-'+(slide_data.wpvPaginatorLayout.outerWidth())+'px;" />');$('.js-wpv_slide_loading_img_'+slide_data.view_number).fadeOut(function(){$(this).remove();});new_height=slide_data.responseView.outerHeight();if(old_height===new_height){slide_data.wpvPaginatorLayout.parent().animate({marginLeft:'0px'},slide_data.speed+500,function(){slide_data.responseView.css({'position':'static','margin':'0px','float':'none'});slide_data.wpvPaginatorLayout.unwrap().unwrap().remove();slide_data.wpvPaginatorFilter.html(slide_data.responseFilter);window.wpvPaginationAjaxLoaded[slide_data.view_number]=true;window.wpvPaginationAnimationFinished[slide_data.view_number]=true;slide_data.callback_next_func();self.manage_browser_history(data_for_history);$(document).trigger('js_event_wpv_pagination_completed',[data_for_events]);self.pagination_queue_trigger(slide_data.view_number,slide_data.next,slide_data.wpvPaginatorFilter);});}else if(old_height>new_height){slide_data.wpvPaginatorLayout.parent().animate({marginLeft:'0px'},slide_data.speed+500,function(){slide_data.wpvPaginatorLayout.parent().parent().animate({height:slide_data.responseView.outerHeight()+'px'},slide_data.speed/2,function(){slide_data.responseView.css({'position':'static','margin':'0px','float':'none'});slide_data.wpvPaginatorLayout.unwrap().unwrap().remove();slide_data.wpvPaginatorFilter.html(slide_data.responseFilter);window.wpvPaginationAjaxLoaded[slide_data.view_number]=true;window.wpvPaginationAnimationFinished[slide_data.view_number]=true;slide_data.callback_next_func();self.manage_browser_history(data_for_history);$(document).trigger('js_event_wpv_pagination_completed',[data_for_events]);self.pagination_queue_trigger(slide_data.view_number,slide_data.next,slide_data.wpvPaginatorFilter);});});}else{slide_data.wpvPaginatorLayout.parent().parent().animate({height:slide_data.responseView.outerHeight()+'px'},slide_data.speed/2,function(){slide_data.wpvPaginatorLayout.parent().animate({marginLeft:'0px'},slide_data.speed+500,function(){slide_data.responseView.css({'position':'static','margin':'0px','float':'none'});slide_data.wpvPaginatorLayout.unwrap().unwrap().remove();slide_data.wpvPaginatorFilter.html(slide_data.responseFilter);window.wpvPaginationAjaxLoaded[slide_data.view_number]=true;window.wpvPaginationAnimationFinished[slide_data.view_number]=true;slide_data.callback_next_func();self.manage_browser_history(data_for_history);$(document).trigger('js_event_wpv_pagination_completed',[data_for_events]);self.pagination_queue_trigger(slide_data.view_number,slide_data.next,slide_data.wpvPaginatorFilter);});});}}},slidev:function(slide_data){var old_height=slide_data.wpvPaginatorLayout.outerHeight(),new_height,data_for_events={},data_for_history={};data_for_events.view_unique_id=slide_data.view_number;data_for_events.effect='slidev';data_for_events.speed=slide_data.speed;data_for_events.layout=slide_data.responseView;data_for_events.filter=slide_data.responseFilterSelector;data_for_history.view_number=slide_data.view_number;data_for_history.page=slide_data.page;data_for_history.effect='slidev';data_for_history.pagination_page_permalink=slide_data.pagination_page_permalink;if(slide_data.next===true){slide_data.responseView.css('visibility','visible');slide_data.wpvPaginatorLayout.after(slide_data.responseView).parent().children().wrapAll('<div />');$('.js-wpv_slide_loading_img_'+slide_data.view_number).fadeOut(function(){$(this).remove();});new_height=slide_data.responseView.outerHeight();if(old_height===new_height){slide_data.wpvPaginatorLayout.parent().animate({marginTop:'-'+slide_data.responseView.outerHeight()+'px'},slide_data.speed+500,function(){slide_data.responseView.css({'position':'static','margin':'0px'});slide_data.wpvPaginatorLayout.unwrap().unwrap().remove();slide_data.wpvPaginatorFilter.html(slide_data.responseFilter);window.wpvPaginationAjaxLoaded[slide_data.view_number]=true;window.wpvPaginationAnimationFinished[slide_data.view_number]=true;slide_data.callback_next_func();self.manage_browser_history(data_for_history);$(document).trigger('js_event_wpv_pagination_completed',[data_for_events]);self.pagination_queue_trigger(slide_data.view_number,slide_data.next,slide_data.wpvPaginatorFilter);});}else if(old_height>new_height){slide_data.wpvPaginatorLayout.parent().animate({marginTop:'-'+old_height+'px'},slide_data.speed+500,function(){slide_data.wpvPaginatorLayout.parent().parent().animate({height:slide_data.responseView.outerHeight()+'px'},slide_data.speed/2,function(){slide_data.responseView.css({'position':'static','margin':'0px'});slide_data.wpvPaginatorLayout.unwrap().unwrap().remove();slide_data.wpvPaginatorFilter.html(slide_data.responseFilter);window.wpvPaginationAjaxLoaded[slide_data.view_number]=true;window.wpvPaginationAnimationFinished[slide_data.view_number]=true;slide_data.callback_next_func();self.manage_browser_history(data_for_history);$(document).trigger('js_event_wpv_pagination_completed',[data_for_events]);self.pagination_queue_trigger(slide_data.view_number,slide_data.next,slide_data.wpvPaginatorFilter);});});}else{slide_data.wpvPaginatorLayout.parent().parent().animate({height:slide_data.responseView.outerHeight()+'px'},slide_data.speed/2,function(){slide_data.wpvPaginatorLayout.parent().animate({marginTop:'-'+old_height+'px'},slide_data.speed+500,function(){slide_data.responseView.css({'position':'static','margin':'0px'});slide_data.wpvPaginatorLayout.unwrap().unwrap().remove();slide_data.wpvPaginatorFilter.html(slide_data.responseFilter);window.wpvPaginationAjaxLoaded[slide_data.view_number]=true;window.wpvPaginationAnimationFinished[slide_data.view_number]=true;slide_data.callback_next_func();self.manage_browser_history(data_for_history);$(document).trigger('js_event_wpv_pagination_completed',[data_for_events]);self.pagination_queue_trigger(slide_data.view_number,slide_data.next,slide_data.wpvPaginatorFilter);});});}}else{slide_data.responseView.css('visibility','visible');slide_data.wpvPaginatorLayout.before(slide_data.responseView).parent().children().wrapAll('<div />');$('.js-wpv_slide_loading_img_'+slide_data.view_number).fadeOut(function(){$(this).remove();});new_height=slide_data.responseView.outerHeight();slide_data.wpvPaginatorLayout.parent().css({'position':'relative','margin-top':'-'+slide_data.responseView.outerHeight()+'px'});if(old_height===new_height){slide_data.wpvPaginatorLayout.parent().animate({marginTop:'0px'},slide_data.speed+500,function(){slide_data.responseView.css({'position':'static','margin':'0px'});slide_data.wpvPaginatorLayout.unwrap().unwrap().remove();slide_data.wpvPaginatorFilter.html(slide_data.responseFilter);window.wpvPaginationAjaxLoaded[slide_data.view_number]=true;window.wpvPaginationAnimationFinished[slide_data.view_number]=true;slide_data.callback_next_func();self.manage_browser_history(data_for_history);$(document).trigger('js_event_wpv_pagination_completed',[data_for_events]);self.pagination_queue_trigger(slide_data.view_number,slide_data.next,slide_data.wpvPaginatorFilter);});}else if(old_height>new_height){slide_data.wpvPaginatorLayout.parent().animate({marginTop:'0px'},slide_data.speed+500,function(){slide_data.wpvPaginatorLayout.parent().parent().animate({height:slide_data.responseView.outerHeight()+'px'},slide_data.speed/2,function(){slide_data.responseView.css({'position':'static','margin':'0px'});slide_data.wpvPaginatorLayout.unwrap().unwrap().remove();slide_data.wpvPaginatorFilter.html(slide_data.responseFilter);window.wpvPaginationAjaxLoaded[slide_data.view_number]=true;window.wpvPaginationAnimationFinished[slide_data.view_number]=true;slide_data.callback_next_func();self.manage_browser_history(data_for_history);$(document).trigger('js_event_wpv_pagination_completed',[data_for_events]);self.pagination_queue_trigger(slide_data.view_number,slide_data.next,slide_data.wpvPaginatorFilter);});});}else{slide_data.wpvPaginatorLayout.parent().parent().animate({height:slide_data.responseView.outerHeight()+'px'},slide_data.speed/2,function(){slide_data.wpvPaginatorLayout.parent().animate({marginTop:'0px'},slide_data.speed+500,function(){slide_data.responseView.css({'position':'static','margin':'0px'});slide_data.wpvPaginatorLayout.unwrap().unwrap().remove();slide_data.wpvPaginatorFilter.html(slide_data.responseFilter);window.wpvPaginationAjaxLoaded[slide_data.view_number]=true;window.wpvPaginationAnimationFinished[slide_data.view_number]=true;slide_data.callback_next_func();self.manage_browser_history(data_for_history);$(document).trigger('js_event_wpv_pagination_completed',[data_for_events]);self.pagination_queue_trigger(slide_data.view_number,slide_data.next,slide_data.wpvPaginatorFilter);});});}}},fade:function(slide_data){var old_height=slide_data.wpvPaginatorLayout.outerHeight(),new_height,data_for_events={},data_for_history={};data_for_events.view_unique_id=slide_data.view_number;data_for_events.effect='fade';data_for_events.speed=slide_data.speed;data_for_events.layout=slide_data.responseView;data_for_events.filter=slide_data.responseFilterSelector;data_for_history.view_number=slide_data.view_number;data_for_history.page=slide_data.page;data_for_history.effect='fade';data_for_history.pagination_page_permalink=slide_data.pagination_page_permalink;$('.js-wpv_slide_loading_img_'+slide_data.view_number).fadeOut(function(){$(this).remove();});slide_data.wpvPaginatorLayout.css({'position':'absolute','z-index':'5'}).after(slide_data.responseView).next().css('position','static');setTimeout(function(){new_height=slide_data.responseView.outerHeight();if(old_height===new_height){slide_data.wpvPaginatorLayout.fadeOut(slide_data.speed,function(){slide_data.wpvPaginatorLayout.unwrap().remove();slide_data.wpvPaginatorFilter.html(slide_data.responseFilter);});slide_data.responseView.hide().css('visibility','visible').fadeIn(slide_data.speed,function(){window.wpvPaginationAjaxLoaded[slide_data.view_number]=true;window.wpvPaginationAnimationFinished[slide_data.view_number]=true;slide_data.callback_next_func();self.manage_browser_history(data_for_history);$(document).trigger('js_event_wpv_pagination_completed',[data_for_events]);WPViews.view_pagination.pagination_queue_trigger(slide_data.view_number,slide_data.next,slide_data.wpvPaginatorFilter);});}else{slide_data.wpvPaginatorLayout.fadeOut(slide_data.speed,function(){slide_data.wpvPaginatorLayout.parent().animate({height:new_height+'px'},slide_data.speed,function(){slide_data.wpvPaginatorLayout.unwrap().remove();slide_data.wpvPaginatorFilter.html(slide_data.responseFilter);slide_data.responseView.hide().css('visibility','visible').fadeIn(slide_data.speed,function(){window.wpvPaginationAjaxLoaded[slide_data.view_number]=true;window.wpvPaginationAnimationFinished[slide_data.view_number]=true;slide_data.callback_next_func();self.manage_browser_history(data_for_history);$(document).trigger('js_event_wpv_pagination_completed',[data_for_events]);WPViews.view_pagination.pagination_queue_trigger(slide_data.view_number,slide_data.next,slide_data.wpvPaginatorFilter);});});});}},0);}};};self.manage_browser_history=function(data){if(self.get_paged_view(data.view_number).type!='rollover'){if(self.get_paged_view(data.view_number).manage_history=='enabled'){if(self.add_paginated_history==true){if(!_.contains(self.pagination_effect_state_keep,data.effect)){if(_.contains(self.pagination_effect_state_replace,data.effect)){history.replaceState(null,'',data.pagination_page_permalink);}else{self.last_paginated_view.push(data.view_number);state_obj={view_number:data.view_number,page:data.page};history.pushState(state_obj,'',data.pagination_page_permalink);self.paginated_history_reach=self.paginated_history_reach+1;}}}else{self.add_paginated_history=true;}}}};window.onpopstate=function(event){if(event.state==null){var last_paginated_view_number=self.last_paginated_view.pop();if(last_paginated_view_number!=undefined){self.add_paginated_history=false;self.paged_views_initial_page[last_paginated_view_number]=self.paged_views_initial_page[last_paginated_view_number]||1;self.trigger_pagination(last_paginated_view_number,self.paged_views_initial_page[last_paginated_view_number]);}}else{if(_.has(event.state,'view_number')&&_.has(event.state,'page')){self.add_paginated_history=false;self.trigger_pagination(event.state.view_number,event.state.page);}}};$(document).on('js_event_wpv_parametric_search_results_updated',function(event,data){window.wpvCachedPages[data.view_unique_id]=[];self.last_paginated_view=[];if(self.paginated_history_reach>0){window.history.go(-Math.abs(self.paginated_history_reach));self.paginated_history_reach=0;}
setTimeout(function(){history.replaceState(null,'',data.permalink);},100);self.updateLanguageSwitcherURLs(data.permalink);});self.updateLanguageSwitcherURLs=function(permalink){$('.wpml-ls-item').each(function(index,langSwitcher){var parsedPermalink=self.parseURL(permalink),langSwitcherHref=$(langSwitcher).find('a').first().attr('href'),parsedLangSwitcherHref=self.parseURL(langSwitcherHref);if('#'===langSwitcherHref){return;}
delete parsedPermalink.params.lang;var finalParams=$.extend({},parsedLangSwitcherHref.params,parsedPermalink.params),strippedLanguageSwitcherHref=langSwitcherHref.replace(parsedLangSwitcherHref.query,'');$(langSwitcher).find('a').first().attr('href',strippedLanguageSwitcherHref+'?'+$.param(finalParams));});};self.parseURL=function(url){var a=document.createElement('a');a.href=url;return{source:url,protocol:a.protocol.replace(':',''),host:a.hostname,port:a.port,query:a.search,params:(function(){var ret={},seg=a.search.replace(/^\?/,'').split('&'),len=seg.length,i=0,s;for(;i<len;i++){if(!seg[i]){continue;}
s=seg[i].split('=');var key=decodeURI(s[0]),value=s[1];switch(typeof ret[key]){case'string':value=[ret[key],s[1]];break;case'object':value=ret[key];value.push(s[1]);break;}
ret[key]=value;}
return ret;})(),file:(a.pathname.match(/\/([^/?#]+)$/i)||[,''])[1],hash:a.hash.replace('#',''),path:a.pathname.replace(/^([^/])/,'/$1'),relative:(a.href.match(/tps?:\/\/[^/]+(.+)/)||[,''])[1],segments:a.pathname.replace(/^\//,'').split('/')};};self.init_effects_conditions=function(){self.pagination_effects_conditions={infinite:function(view_pagination_data,page){if(page!=(view_pagination_data.page+1)){return false;}
return true;}};};self.init_effects_spinner=function(){self.pagination_effects_spinner['fade']=self.pagination_effects_spinner['slideleft']=self.pagination_effects_spinner['slideright']=self.pagination_effects_spinner['sliderightforward']=self.pagination_effects_spinner['slideh']=self.pagination_effects_spinner['slideup']=self.pagination_effects_spinner['slidedown']=self.pagination_effects_spinner['slidedownforward']=self.pagination_effects_spinner['slidev']=function(view_number,wpvPaginatorLayout){var img=new Image();img.src=self.get_paged_view(view_number).spinner_image;img.onload=function(){var wpvPaginatorLayoutOffset=wpvPaginatorLayout.position(),wpvPaginatorSpinner='<div style="'
+'width:'+img.width+'px;'
+'height:'+img.height+'px;'
+'border:none;'
+'background:transparent 50% 50% no-repeat url('+self.get_paged_view(view_number).spinner_image+');'
+'position:absolute;'
+'z-index:99;'
+'top:'+(Math.round(wpvPaginatorLayoutOffset.top)+(Math.round(wpvPaginatorLayout.height()/2))-(Math.round(img.height/2)))+'px;'
+'left:'+(Math.round(wpvPaginatorLayoutOffset.left)+(Math.round(wpvPaginatorLayout.width()/2))-(Math.round(img.width/2)))+'px;'
+'" '
+'class="wpv_slide_loading_img js-wpv_slide_loading_img_'+view_number+'"'
+'>'
+'</div>';wpvPaginatorLayout.before(wpvPaginatorSpinner).animate({opacity:0.5},300);};};self.pagination_effects_spinner['infinite']=function(view_number,wpvPaginatorLayout){var img=new Image();img.src=self.get_paged_view(view_number).spinner_image;img.onload=function(){var wpvPaginatorLayoutOffset=wpvPaginatorLayout.position(),wpvPaginatorSpinner='<div style="'
+'width:'+img.width+'px;'
+'height:'+img.height+'px;'
+'border:none;'
+'background:transparent 50% 50% no-repeat url('+self.get_paged_view(view_number).spinner_image+');'
+'position:absolute;'
+'z-index:99;'
+'top:'+(Math.round(wpvPaginatorLayoutOffset.top)+(wpvPaginatorLayout.height())-(Math.round(img.height/2)))+'px;'
+'left:'+(Math.round(wpvPaginatorLayoutOffset.left)+(Math.round(wpvPaginatorLayout.width()/2))-(Math.round(img.width/2)))+'px;'
+'" '
+'class="wpv_slide_loading_img js-wpv_slide_loading_img_'+view_number+'"'
+'>'
+'</div>';wpvPaginatorLayout.before(wpvPaginatorSpinner).animate({opacity:0.5},300);};};};self.init_paged_views=function(container){var init_scrolling_event=false,init_rollover_timing=false;this.historyP=this.historyP||[];window.wpvCachedPages=window.wpvCachedPages||[];window.wpvCachedImages=window.wpvCachedImages||[];$('.js-wpv-view-layout',container).each(function(){var thiz=$(this),view_number=thiz.data('viewnumber');self.init_paged_view(view_number);if(self.paged_views[view_number].effect=='infinite'&&self.paged_views[view_number].page==1){init_scrolling_event=true;}
if(self.paged_views[view_number].type=='rollover'&&!wpv_stop_rollover.hasOwnProperty(view_number)){init_rollover_timing=true;rollover_has_index=_.findIndex(self.rollover_running,function(item){return item.view_number==view_number;});if(rollover_has_index<0){var thiz_rollover_data={view_number:view_number,page:1,force_reset:false};self.rollover_running.push(thiz_rollover_data);if(self.init_rollover_timing_fired){self.trigger_rollover(thiz_rollover_data);}}else{self.rollover_running[rollover_has_index]={view_number:view_number,page:1,force_reset:true};}}});if(!self.init_scrolling_event_fired&&init_scrolling_event){self.init_scrolling_event_callback();}
if(!self.init_rollover_timing_fired&&init_rollover_timing){self.init_rollover_timing_callback();}
return self;};self.init_paged_view=function(view_number){this.historyP=this.historyP||[];self.paged_views[view_number]=$('#wpv-view-layout-'+view_number).data('pagination');self.paged_views_initial_page[view_number]=self.paged_views[view_number].page;this.historyP[view_number]=self.paged_views[view_number].page;window.wpvCachedPages[view_number]=[];if(self.paged_views[view_number].type!='disabled'&&self.paged_views[view_number].type!='paged'&&self.paged_views[view_number].page>1){$('#wpv-view-layout-'+view_number).removeClass('js-wpv-layout-infinite-scrolling');}
if($('#wpv-view-layout-'+view_number).parents('.js-wpv-view-layout').length>0){self.paged_views[view_number].manage_history='disabled';}};self.get_paged_view=function(view_number){if(!_.has(self.paged_views,view_number)){self.init_paged_view(view_number);}
return self.paged_views[view_number];}
self.is_infinite_triggable=function(view_layout){var flag_element=view_layout,view_number=view_layout.data('viewnumber');infinite_tolerance=self.get_paged_view(view_number).infinite_tolerance;infinite_tolerance=(isNaN(infinite_tolerance))?0:+infinite_tolerance;if(view_layout.find('.js-wpv-loop').length>0){flag_element=view_layout.find('.js-wpv-loop');}
return((flag_element.offset().top+flag_element.outerHeight())<=($(window).scrollTop()+$(window).height()+infinite_tolerance)||($(window).scrollTop()+$(window).height())==$(document).height());};self.init_scrolling_event_callback=function(){$(window).on('scroll',_.debounce(_.throttle(function(){$('.js-wpv-layout-infinite-scrolling').each(function(){var thiz=$(this),thiz_view_number=thiz.data('viewnumber'),thiz_paged_view_data=self.get_paged_view(thiz_view_number);if(thiz_paged_view_data.page<thiz_paged_view_data.max_pages&&self.is_infinite_triggable(thiz)){self.trigger_pagination(thiz_view_number,thiz_paged_view_data.page+1);}});},1000),1000));self.init_scrolling_event_fired=true;};self.trigger_rollover=function(view_data){var rollover_data=$.extend({},{view_number:'',page:1,force_reset:false},view_data),view_number=rollover_data.view_number,paged_view_data=self.get_paged_view(view_number);if(paged_view_data.max_pages>1&&$("#wpv-view-layout-"+view_number).length>0){setTimeout(function(){var rollover_index=_.findIndex(self.rollover_paused,function(item){return item.view_number==view_number;});if(self.rollover_paused[rollover_index]&&self.rollover_paused[rollover_index].view_number&&self.rollover_paused[rollover_index].view_number==view_number){setTimeout(function(){self.trigger_rollover(view_data)},100);}else{if(!wpv_stop_rollover.hasOwnProperty(view_number)&&$("#wpv-view-layout-"+view_number).length>0){var view_page=rollover_data.page,rollover_index=_.findIndex(self.rollover_running,function(item){return item.view_number==view_number;});if(self.rollover_running[rollover_index].force_reset){self.rollover_running[rollover_index].force_reset=false;view_page=1;}
if(paged_view_data.effect==='slideright'||paged_view_data.effect==='slidedown'){if(view_page<=1){view_page=paged_view_data.max_pages;}else{view_page=view_page-1;}}else{if(view_page===paged_view_data.max_pages){view_page=1;}else{view_page=view_page+1;}}
self.rollover_running[rollover_index].page=view_page;WPViews.view_pagination.trigger_pagination(view_number,view_page);}else{var rollover_index=_.findIndex(self.rollover_running,function(item){return item.view_number==view_number;});self.rollover_running.splice(rollover_index,1);}}},paged_view_data.speed*1000);}else{var rollover_index=_.findIndex(self.rollover_running,function(item){return item.view_number==view_number;});self.rollover_running.splice(rollover_index,1);}};self.init_rollover_timing_callback=function(){var rollover_running=self.rollover_running.slice(0);_.each(rollover_running,function(view_data,index,list){self.trigger_rollover(view_data);});self.init_rollover_timing_fired=true;};$(document).on('js_event_wpv_pagination_completed',function(event,data){if(self.get_paged_view(data.view_unique_id).type=='rollover'&&!wpv_stop_rollover.hasOwnProperty(data.view_unique_id)){var rollover_index=_.findIndex(self.rollover_running,function(item){return item.view_number==data.view_unique_id;});self.trigger_rollover(self.rollover_running[rollover_index]);}});$(document).on('js_event_wpv_parametric_search_results_updated',function(event,data){if(self.get_paged_view(data.view_unique_id).type=='rollover'&&!wpv_stop_rollover.hasOwnProperty(data.view_unique_id)){var rollover_index=_.findIndex(self.rollover_running,function(item){return item.view_number==data.view_unique_id;});self.trigger_rollover(self.rollover_running[rollover_index]);}});$(document).on('mouseenter','.js-wpv-view-layout',function(){var view_number=$(this).data('viewnumber');if(self.get_paged_view(view_number).pause_on_hover=='enabled'){var thiz_rollover_data={view_number:view_number,};self.rollover_paused.push(thiz_rollover_data);}});$(document).on('mouseleave','.js-wpv-view-layout',function(){var view_number=$(this).data('viewnumber');var rollover_index=_.findIndex(self.rollover_paused,function(item){return item.view_number==view_number;});self.rollover_paused.splice(rollover_index,1);});self.init_preload_images=function(container){$('.js-wpv-layout-preload-images',container).css('visibility','hidden');$('.js-wpv-layout-preload-images',container).each(function(){var preloadedImages=[],element=$(this),images=element.find('img');if(images.length<1){element.css('visibility','visible');}else{images.one('load',function(){preloadedImages.push($(this).attr('src'));if(preloadedImages.length===images.length){element.css('visibility','visible');}}).each(function(){if(this.complete){$(this).load();}});setTimeout(function(){element.css('visibility','visible');},3000);}});};self.init_preload_pages=function(container){$('.js-wpv-layout-preload-pages',container).each(function(){var thiz=$(this),view_number=thiz.data('viewnumber'),paged_view_data=self.get_paged_view(view_number),max_pages=parseInt(paged_view_data.max_pages,10),max_reach=parseInt(paged_view_data.preload_reach,10)+1;self.pagination_preload_pages({view_number:view_number,cache_pages:'disabled',preload_pages:'enabled',page:1,max_reach:max_reach,max_pages:max_pages});});};self.init_pagination_button_state=function(){$('.pagination li:not(.disabled,.active)').has('span').addClass('disabled');$('.pagination li.page-item:empty').remove();};self.init=function(){self.init_effects();self.init_effects_conditions();self.init_effects_spinner();var init_html=$('html');self.init_paged_views(init_html);self.init_preload_images(init_html);self.init_preload_pages(init_html);self.init_pagination_button_state();}
self.init();};WPViews.ViewParametricSearch=function($){var self=this;self.manage_update_results=function(data){if(data.ajax_before!==''){var ajax_before_func=window[data.ajax_before];if(typeof ajax_before_func==="function"){ajax_before_func(data.view_num);}}
var data_for_events={};data_for_events.view_unique_id=data.view_num;data_for_events.permalink=data.permalink;data.layout.fadeOut(200,function(){data.layout.html(data.new_layout.html()).attr('data-pagination',data.new_layout.attr('data-pagination')).data('pagination',data.new_layout.data('pagination')).fadeIn('fast',function(){var ajax_after_func=window[data.ajax_after];if(typeof ajax_after_func==="function"){ajax_after_func(data.view_num);}
data_for_events.layout=data.layout;$(document).trigger('js_event_wpv_parametric_search_results_updated',[data_for_events]);});});};self.manage_changed_form=function(settings){var fil=settings.form,view_num=settings.view_unique_id,lay=$('#wpv-view-layout-'+view_num),full_data=fil.find('.js-wpv-filter-data-for-this-form'),ajax_pre_before=full_data.data('ajaxprebefore'),view_type='full',additional_forms=$('.js-wpv-filter-form-'+view_num).not(fil),additional_forms_only,additional_forms_full,ajax_get='both',new_content_form,new_content_form_filter,new_content_full,new_content_full_filter,new_content_full_layout,spinnerContainer=fil.find('.js-wpv-dps-spinner').add(additional_forms.find('.js-wpv-dps-spinner')),spinnerItems=spinnerContainer.length
data_for_events={},data_for_manage_updated_results={};data_for_events.view_unique_id=view_num;data_for_manage_updated_results.view_num=view_num;data_for_manage_updated_results.ajax_before=full_data.data('ajaxbefore');data_for_manage_updated_results.ajax_after=full_data.data('ajaxafter');if(fil.hasClass('js-wpv-form-only')){view_type='form';}
if(settings.update_form){if(additional_forms.length>0){additional_forms_only=additional_forms.not('.js-wpv-form-full');additional_forms_full=additional_forms.not('.js-wpv-form-only');if(view_type=='form'){if(additional_forms_full.length>0||settings.update_results){ajax_get='both';}else{ajax_get='form';}
if(settings.update_results){if(ajax_pre_before!==''){var ajax_pre_before_func=window[ajax_pre_before];if(typeof ajax_pre_before_func==="function"){ajax_pre_before_func(view_num);}}
$(document).trigger('js_event_wpv_parametric_search_started',[data_for_events]);}
if(spinnerItems){$(spinnerContainer).fadeIn('fast');}
wpv_stop_rollover[view_num]=true;WPViews.view_frontend_utils.get_updated_query_results(view_num,1,fil,ajax_get).done(function(response){if(response.success){new_content_form=$('<div></div>').append(response.data.form);new_content_full=$('<div></div>').append(response.data.full);new_content_form_filter=new_content_form.find('.js-wpv-filter-form-'+view_num);new_content_full_filter=new_content_full.find('.js-wpv-filter-form-'+view_num);new_content_full_layout=new_content_full.find('.js-wpv-view-layout-'+view_num);fil.html(new_content_form_filter.html());WPViews.view_frontend_utils.destroy_frontend_datepicker();WPViews.view_frontend_utils.clone_form(fil,additional_forms_only);additional_forms_full.each(function(){$(this).html(new_content_full_filter.html());});data_for_events.view_changed_form=fil;data_for_events.view_changed_form_additional_forms_only=additional_forms_only;data_for_events.view_changed_form_additional_forms_full=additional_forms_full;$(document).trigger('js_event_wpv_parametric_search_form_updated',[data_for_events]);if(settings.update_results){data_for_manage_updated_results.layout=lay;data_for_manage_updated_results.new_layout=new_content_full_layout;data_for_manage_updated_results.permalink=response.data['parametric_permalink'];self.manage_update_results(data_for_manage_updated_results);}
spinnerContainer.hide();}});}else{if(additional_forms_only.length>0){ajax_get='both';}else{ajax_get='full';}
if(settings.update_results){if(ajax_pre_before!==''){var ajax_pre_before_func=window[ajax_pre_before];if(typeof ajax_pre_before_func==="function"){ajax_pre_before_func(view_num);}}
$(document).trigger('js_event_wpv_parametric_search_started',[data_for_events]);}
if(spinnerItems){$(spinnerContainer).fadeIn('fast');}
wpv_stop_rollover[view_num]=true;WPViews.view_frontend_utils.get_updated_query_results(view_num,1,fil,ajax_get).done(function(response){if(response.success){new_content_form=$('<div></div>').append(response.data.form);new_content_full=$('<div></div>').append(response.data.full);new_content_form_filter=new_content_form.find('.js-wpv-filter-form-'+view_num);new_content_full_filter=new_content_full.find('.js-wpv-filter-form-'+view_num);new_content_full_layout=new_content_full.find('.js-wpv-view-layout-'+view_num);fil.html(new_content_full_filter.html());WPViews.view_frontend_utils.destroy_frontend_datepicker();WPViews.view_frontend_utils.clone_form(fil,additional_forms_full);additional_forms_only.each(function(){$(this).html(new_content_form_filter.html());});data_for_events.view_changed_form=fil;data_for_events.view_changed_form_additional_forms_only=additional_forms_only;data_for_events.view_changed_form_additional_forms_full=additional_forms_full;$(document).trigger('js_event_wpv_parametric_search_form_updated',[data_for_events]);if(settings.update_results){data_for_manage_updated_results.layout=lay;data_for_manage_updated_results.new_layout=new_content_full_layout;data_for_manage_updated_results.permalink=response.data['parametric_permalink'];self.manage_update_results(data_for_manage_updated_results);}
spinnerContainer.hide();}});}}else{if(view_type=='form'){if(settings.update_results){ajax_get='both';}else{ajax_get='form';}
if(settings.update_results){if(ajax_pre_before!==''){var ajax_pre_before_func=window[ajax_pre_before];if(typeof ajax_pre_before_func==="function"){ajax_pre_before_func(view_num);}}
$(document).trigger('js_event_wpv_parametric_search_started',[data_for_events]);}
if(spinnerItems){$(spinnerContainer).fadeIn('fast');}
wpv_stop_rollover[view_num]=true;WPViews.view_frontend_utils.get_updated_query_results(view_num,1,fil,ajax_get).done(function(response){if(response.success){new_content_form=$('<div></div>').append(response.data.form);new_content_full=$('<div></div>').append(response.data.full);new_content_form_filter=new_content_form.find('.js-wpv-filter-form-'+view_num);new_content_full_layout=new_content_full.find('.js-wpv-view-layout-'+view_num);fil.html(new_content_form_filter.html());data_for_events.view_changed_form=fil;data_for_events.view_changed_form_additional_forms_only=additional_forms_only;data_for_events.view_changed_form_additional_forms_full=additional_forms_full;$(document).trigger('js_event_wpv_parametric_search_form_updated',[data_for_events]);if(settings.update_results){data_for_manage_updated_results.layout=lay;data_for_manage_updated_results.new_layout=new_content_full_layout;data_for_manage_updated_results.permalink=response.data['parametric_permalink'];self.manage_update_results(data_for_manage_updated_results);}
spinnerContainer.hide();}});}else{if(settings.update_results){if(ajax_pre_before!==''){var ajax_pre_before_func=window[ajax_pre_before];if(typeof ajax_pre_before_func==="function"){ajax_pre_before_func(view_num);}}
$(document).trigger('js_event_wpv_parametric_search_started',[data_for_events]);}
if(spinnerItems){$(spinnerContainer).fadeIn('fast');}
wpv_stop_rollover[view_num]=true;WPViews.view_frontend_utils.get_updated_query_results(view_num,1,fil,'full').done(function(response){if(response.success){new_content_full=$('<div></div>').append(response.data.full);new_content_full_filter=new_content_full.find('.js-wpv-filter-form-'+view_num);new_content_full_layout=new_content_full.find('.js-wpv-view-layout-'+view_num);fil.html(new_content_full_filter.html());data_for_events.view_changed_form=fil;data_for_events.view_changed_form_additional_forms_only=additional_forms_only;data_for_events.view_changed_form_additional_forms_full=additional_forms_full;$(document).trigger('js_event_wpv_parametric_search_form_updated',[data_for_events]);if(settings.update_results){data_for_manage_updated_results.layout=lay;data_for_manage_updated_results.new_layout=new_content_full_layout;data_for_manage_updated_results.permalink=response.data['parametric_permalink'];self.manage_update_results(data_for_manage_updated_results);}
spinnerContainer.hide();}});}}}else{if(additional_forms.length>0){additional_forms_only=additional_forms.not('.js-wpv-form-full');additional_forms_full=additional_forms.not('.js-wpv-form-only');if(view_type=='form'){WPViews.view_frontend_utils.destroy_frontend_datepicker();WPViews.view_frontend_utils.clone_form(fil,additional_forms_only);if(additional_forms_full.length>0||settings.update_results){if(settings.update_results){if(ajax_pre_before!==''){var ajax_pre_before_func=window[ajax_pre_before];if(typeof ajax_pre_before_func==="function"){ajax_pre_before_func(view_num);}}
$(document).trigger('js_event_wpv_parametric_search_started',[data_for_events]);}
if(spinnerItems){$(spinnerContainer).fadeIn('fast');}
wpv_stop_rollover[view_num]=true;WPViews.view_frontend_utils.get_updated_query_results(view_num,1,fil,'full').done(function(response){if(response.success){new_content_full=$('<div></div>').append(response.data.full);new_content_full_filter=new_content_full.find('.js-wpv-filter-form-'+view_num);new_content_full_layout=new_content_full.find('.js-wpv-view-layout-'+view_num);additional_forms_full.each(function(){$(this).html(new_content_full_filter.html());});data_for_events.view_changed_form=fil;data_for_events.view_changed_form_additional_forms_only=additional_forms_only;data_for_events.view_changed_form_additional_forms_full=additional_forms_full;$(document).trigger('js_event_wpv_parametric_search_form_updated',[data_for_events]);if(settings.update_results){data_for_manage_updated_results.layout=lay;data_for_manage_updated_results.new_layout=new_content_full_layout;data_for_manage_updated_results.permalink=response.data['parametric_permalink'];self.manage_update_results(data_for_manage_updated_results);}
spinnerContainer.hide();}});}else{data_for_events.view_changed_form=fil;data_for_events.view_changed_form_additional_forms_only=additional_forms_only;data_for_events.view_changed_form_additional_forms_full=additional_forms_full;$(document).trigger('js_event_wpv_parametric_search_form_updated',[data_for_events]);}}else{WPViews.view_frontend_utils.destroy_frontend_datepicker();WPViews.view_frontend_utils.clone_form(fil,additional_forms_full);WPViews.view_frontend_utils.render_frontend_datepicker();if(additional_forms_only.length>0||settings.update_results){if(additional_forms_only.length>0){ajax_get='both';}else{ajax_get='full';}
if(settings.update_results){if(ajax_pre_before!==''){var ajax_pre_before_func=window[ajax_pre_before];if(typeof ajax_pre_before_func==="function"){ajax_pre_before_func(view_num);}}
$(document).trigger('js_event_wpv_parametric_search_started',[data_for_events]);}
if(spinnerItems){$(spinnerContainer).fadeIn('fast');}
wpv_stop_rollover[view_num]=true;WPViews.view_frontend_utils.get_updated_query_results(view_num,1,fil,ajax_get).done(function(response){if(response.success){new_content_form=$('<div></div>').append(response.data.form);new_content_full=$('<div></div>').append(response.data.full);new_content_form_filter=new_content_form.find('.js-wpv-filter-form-'+view_num);new_content_full_layout=new_content_full.find('.js-wpv-view-layout-'+view_num);additional_forms_only.each(function(){$(this).html(new_content_form_filter.html());});data_for_events.view_changed_form=fil;data_for_events.view_changed_form_additional_forms_only=additional_forms_only;data_for_events.view_changed_form_additional_forms_full=additional_forms_full;$(document).trigger('js_event_wpv_parametric_search_form_updated',[data_for_events]);if(settings.update_results){data_for_manage_updated_results.layout=lay;data_for_manage_updated_results.new_layout=new_content_full_layout;data_for_manage_updated_results.permalink=response.data['parametric_permalink'];self.manage_update_results(data_for_manage_updated_results);}
spinnerContainer.hide();}});}}}else{if(settings.update_results){if(ajax_pre_before!==''){var ajax_pre_before_func=window[ajax_pre_before];if(typeof ajax_pre_before_func==="function"){ajax_pre_before_func(view_num);}}
$(document).trigger('js_event_wpv_parametric_search_started',[data_for_events]);if(spinnerItems){$(spinnerContainer).fadeIn('fast');}
wpv_stop_rollover[view_num]=true;WPViews.view_frontend_utils.get_updated_query_results(view_num,1,fil,'full').done(function(response){if(response.success){new_content_full=$('<div></div>').append(response.data.full);new_content_full_layout=new_content_full.find('.js-wpv-view-layout-'+view_num);data_for_manage_updated_results.layout=lay;data_for_manage_updated_results.new_layout=new_content_full_layout;data_for_manage_updated_results.permalink=response.data['parametric_permalink'];self.manage_update_results(data_for_manage_updated_results);spinnerContainer.hide();}});}}}};self.extend_wpv_parametric_search_triggered_data=function(data){var defaults={force_form_update:false,force_results_update:false},settings=$.extend({},defaults,data),view_loop=$('#wpv-view-layout-'+settings.view_unique_id);if(settings.force_form_update==false&&((settings.force_results_update==true||settings.form.hasClass('js-wpv-ajax-results-enabled'))&&_.has(WPViews.view_pagination.paged_views,settings.view_unique_id)&&_.has(WPViews.view_pagination.paged_views[settings.view_unique_id],'has_controls_in_form')&&WPViews.view_pagination.paged_views[settings.view_unique_id].has_controls_in_form=='enabled')){settings.force_form_update=true;}
settings.update_form=(settings.force_form_update||settings.form.hasClass('js-wpv-dps-enabled'));settings.update_results=(view_loop.length>0&&(settings.force_results_update||settings.form.hasClass('js-wpv-ajax-results-enabled')));return settings;};$(document).on('click','.js-wpv-date-display',function(){var url_param=$(this).data('param');$('.js-wpv-date-front-end-'+url_param).datepicker('show');});$(document).on('click','.js-wpv-date-front-end-clear',function(e){e.preventDefault();var thiz=$(this),url_param=thiz.data('param'),form=thiz.closest('form');form.find('.js-wpv-date-param-'+url_param).html('');form.find('.js-wpv-date-front-end-'+url_param).val('');thiz.hide();form.find('.js-wpv-date-param-'+url_param+'-value').val('').trigger('change');});$(document).on('change','.js-wpv-post-relationship-update',function(){var thiz=$(this),fil=thiz.closest('form'),view_number=fil.data('viewnumber'),additional_forms=$('.js-wpv-filter-form-'+view_number).not(fil),currentposttype=thiz.data('currentposttype'),watchers=fil.find('.js-wpv-'+currentposttype+'-watch').add(additional_forms.find('.js-wpv-'+currentposttype+'-watch')),watcherslength=watchers.length,i;if(watcherslength){for(i=0;i<watcherslength;i++){$(watchers[i]).attr('disabled',true).removeAttr('checked').removeAttr('selected').not(':button, :submit, :reset, :hidden, :radio, :checkbox').val('0');}}
var data_for_events={view_unique_id:view_number,form:fil,force_form_update:true};data_for_events=self.extend_wpv_parametric_search_triggered_data(data_for_events);$(document).trigger('js_event_wpv_parametric_search_triggered',[data_for_events]);});$(document).on('change','.js-wpv-filter-trigger',function(){var thiz=$(this),fil=thiz.closest('form'),view_number=fil.data('viewnumber');var data_for_events={view_unique_id:view_number,form:fil};data_for_events=self.extend_wpv_parametric_search_triggered_data(data_for_events);$(document).trigger('js_event_wpv_parametric_search_triggered',[data_for_events]);});$(document).on('click','.js-wpv-ajax-results-enabled .js-wpv-submit-trigger, .js-wpv-ajax-results-submit-enabled .js-wpv-submit-trigger',function(e){e.preventDefault();var thiz=$(this),fil=thiz.closest('form'),view_number=fil.data('viewnumber');var data_for_events={view_unique_id:view_number,form:fil,force_form_update:false,force_results_update:true};data_for_events=self.extend_wpv_parametric_search_triggered_data(data_for_events);$(document).trigger('js_event_wpv_parametric_search_triggered',[data_for_events]);});$(document).on('keypress','.js-wpv-ajax-results-enabled .js-wpv-filter-trigger-delayed, .js-wpv-ajax-results-submit-enabled .js-wpv-filter-trigger-delayed',function(e){if(e.which==13){e.preventDefault();var thiz=$(this),fil=thiz.closest('form'),view_number=fil.data('viewnumber');var data_for_events={view_unique_id:view_number,form:fil,force_results_update:true};data_for_events=self.extend_wpv_parametric_search_triggered_data(data_for_events);$(document).trigger('js_event_wpv_parametric_search_triggered',[data_for_events]);}});$(document).on('click','.js-wpv-reset-trigger',function(e){e.preventDefault();var thiz=$(this),fil=thiz.closest('form'),view_number=fil.data('viewnumber'),additional_forms=$('.js-wpv-filter-form-'+view_number).not(fil),watchers,watcherslength,i,target=fil.attr('action'),form_only_force_update=false,form_only_results_force_update=false;if(fil.hasClass('js-wpv-form-only')){watchers=fil.find('input, select').add(additional_forms.find('input, select'));watcherslength=watchers.length;form_only_force_update=(fil.hasClass('js-wpv-dps-enabled')||(fil.find('.js-wpv-post-relationship-update').length>0));if(fil.hasClass('js-wpv-ajax-results-enabled')||fil.hasClass('js-wpv-ajax-results-submit-enabled')){form_only_results_force_update=true;}
if(watcherslength){for(i=0;i<watcherslength;i++){if(!$(watchers[i]).hasClass('js-wpv-keep-on-clear')){$(watchers[i]).attr('disabled',form_only_force_update).removeAttr('checked').removeAttr('selected').not(':button, :submit, :reset, :hidden, :radio, :checkbox').val('');}}}
var data_for_events={view_unique_id:view_number,form:fil,force_form_update:form_only_force_update,force_results_update:form_only_results_force_update};data_for_events=self.extend_wpv_parametric_search_triggered_data(data_for_events);if(!form_only_results_force_update&&$('#wpv-view-layout-'+fil.data('viewnumber')).length>0){window.location.href=target;}
else{$(document).trigger('js_event_wpv_parametric_search_triggered',[data_for_events]);}}else if(fil.hasClass('js-wpv-ajax-results-enabled')||fil.hasClass('js-wpv-ajax-results-submit-enabled')){watchers=fil.find('input, select').add(additional_forms.find('input, select'));watcherslength=watchers.length;if(watcherslength){for(i=0;i<watcherslength;i++){if(!$(watchers[i]).hasClass('js-wpv-keep-on-clear')){$(watchers[i]).attr('disabled',true).removeAttr('checked').removeAttr('selected').not(':button, :submit, :reset, :hidden, :radio, :checkbox').val('');}}}
var data_for_events={view_unique_id:view_number,form:fil,force_form_update:true,force_results_update:true};data_for_events=self.extend_wpv_parametric_search_triggered_data(data_for_events);$(document).trigger('js_event_wpv_parametric_search_triggered',[data_for_events]);}else{window.location.href=WPViews.view_frontend_utils.updateUrlQuery('wpv_view_count',null,target);}});$(document).on('js_event_wpv_parametric_search_triggered',function(event,settings){self.manage_changed_form(settings);});$(document).on('change','.js-wpv-filter-trigger, .js-wpv-filter-trigger-delayed',function(){var thiz=$(this),fil=thiz.closest('form'),view_num=fil.data('viewnumber');wpv_stop_rollover[view_num]=true;});$(document).on('js_event_wpv_parametric_search_started',function(event,data){});$(document).on('js_event_wpv_parametric_search_form_updated',function(event,data){WPViews.view_frontend_utils.render_frontend_datepicker();});$(document).on('js_event_wpv_parametric_search_results_updated',function(event,data){WPViews.view_frontend_utils.render_frontend_media_shortcodes(data.layout);});self.init=function(){}
self.init();};jQuery(document).ready(function($){WPViews.view_frontend_utils=new WPViews.ViewFrontendUtils($);WPViews.view_sorting=new WPViews.ViewSorting($);WPViews.view_pagination=new WPViews.ViewPagination($);WPViews.view_parametric_search=new WPViews.ViewParametricSearch($);});
;!function(c,d){"use strict";var e=!1,n=!1;if(d.querySelector)if(c.addEventListener)e=!0;if(c.wp=c.wp||{},!c.wp.receiveEmbedMessage)if(c.wp.receiveEmbedMessage=function(e){var t=e.data;if(t)if(t.secret||t.message||t.value)if(!/[^a-zA-Z0-9]/.test(t.secret)){for(var r,a,i,s=d.querySelectorAll('iframe[data-secret="'+t.secret+'"]'),n=d.querySelectorAll('blockquote[data-secret="'+t.secret+'"]'),o=0;o<n.length;o++)n[o].style.display="none";for(o=0;o<s.length;o++)if(r=s[o],e.source===r.contentWindow){if(r.removeAttribute("style"),"height"===t.message){if(1e3<(i=parseInt(t.value,10)))i=1e3;else if(~~i<200)i=200;r.height=i}if("link"===t.message)if(a=d.createElement("a"),i=d.createElement("a"),a.href=r.getAttribute("src"),i.href=t.value,i.host===a.host)if(d.activeElement===r)c.top.location.href=t.value}}},e)c.addEventListener("message",c.wp.receiveEmbedMessage,!1),d.addEventListener("DOMContentLoaded",t,!1),c.addEventListener("load",t,!1);function t(){if(!n){n=!0;for(var e,t,r=-1!==navigator.appVersion.indexOf("MSIE 10"),a=!!navigator.userAgent.match(/Trident.*rv:11\./),i=d.querySelectorAll("iframe.wp-embedded-content"),s=0;s<i.length;s++){if(!(e=i[s]).getAttribute("data-secret"))t=Math.random().toString(36).substr(2,10),e.src+="#?secret="+t,e.setAttribute("data-secret",t);if(r||a)(t=e.cloneNode(!0)).removeAttribute("security"),e.parentNode.replaceChild(t,e)}}}}(window,document);